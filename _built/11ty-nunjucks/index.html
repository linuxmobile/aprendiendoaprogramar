<!doctype html><html domain=.com lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="" http-equiv=Content-Security-Policy><link href=/favicon.svg rel=icon type=image/svg+xml><meta content=#f9c412 name=theme-color><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name=robots><title>11ty + Nunjucks | Note of Thi</title><meta content="11ty + Nunjucks | Note of Thi" prefix=og:http://ogp.me/ns# property=og:title><meta content="This is not a tutorial to create an 11ty website, this's a note! You can find some very new and useful techniques on this note alongside the..." name=description><meta content="This is not a tutorial to create an 11ty website, this's a note! You can find some very new and useful techniques on this note alongside the..." prefix=og:http://ogp.me/ns# property=og:description><meta content=summary_large_image name=twitter:card><meta content=@dinhanhthi name=twitter:site><meta content=@dinhanhthi name=twitter:creator><meta content=https://dinhanhthi.com/img_src/cover.png prefix=og:http://ogp.me/ns# property=og:image><meta content=article prefix=og:http://ogp.me/ns# property=og:type><link href=https://dinhanhthi.com/11ty-nunjucks/ rel=canonical><meta content=https://dinhanhthi.com/11ty-nunjucks/ prefix=og:http://ogp.me/ns# property=og:url><meta content=no-referrer-when-downgrade name=referrer><link href=/feed/feed.xml rel=alternate type=application/atom+xml title="ðŸ”¥ Anh-Thi DINH"><link href=/ rel=preconnect crossorigin><style>body {
      visibility: hidden;
      opacity: 0;
    }</style><noscript><style>body {
        visibility: visible;
        opacity: 1;
      }</style></noscript><script csp-hash>if (/Mac OS X/.test(navigator.userAgent))
      document
        .documentElement
        .classList
        .add('apple')</script><link href=/src/css/main.css rel=stylesheet type=text/css><style>@font-face{font-display:swap;font-family:'fontello';src:url(/fontello/font/fontello.eot?46432155);src:url(/fontello/font/fontello.eot?46432155#iefix) format('embedded-opentype'),url(/fontello/font/fontello.woff2?46432155) format('woff2'),url(/fontello/font/fontello.woff?46432155) format('woff'),url(/fontello/font/fontello.ttf?46432155) format('truetype'),url(/fontello/font/fontello.svg?46432155#fontello) format('svg');font-weight:400;font-style:normal}[class*=" icon-"]:before,[class^=icon-]:before{font-family:"fontello";font-style:normal;font-weight:400;speak:never;display:inline-block;text-decoration:inherit;width:1em;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-doc:before{content:'\e800'}.icon-doc-add:before{content:'\e801'}.icon-stats:before{content:'\e802'}.icon-tags:before{content:'\e803'}.icon-like:before{content:'\e804'}.icon-cog-alt:before{content:'\e805'}.icon-project:before{content:'\e806'}.icon-mooc:before{content:'\e807'}.icon-dl:before{content:'\e808'}.icon-ml:before{content:'\e809'}.icon-python:before{content:'\e80a'}.icon-nlp:before{content:'\e80b'}.icon-r-lang:before{content:'\e80c'}.icon-skill:before{content:'\e80d'}.icon-js-solid:before{content:'\e80e'}.icon-game:before{content:'\e80f'}.icon-web:before{content:'\e810'}.icon-algo:before{content:'\e811'}.icon-mooc-solid:before{content:'\e812'}.icon-chatbot:before{content:'\e813'}.icon-web-dev:before{content:'\e814'}.icon-data:before{content:'\e815'}.icon-skill-solid:before{content:'\e816'}.icon-python-solid:before{content:'\e817'}.icon-project-solid:before{content:'\e818'}.icon-js:before{content:'\e819'}.icon-rocket:before{content:'\e81a'}.icon-ml-solid:before{content:'\e81b'}.icon-game-solid:before{content:'\e81c'}.icon-dl-solid:before{content:'\e81d'}.icon-nlp-solid:before{content:'\e81e'}.icon-web-solid:before{content:'\e81f'}.icon-algo-solid:before{content:'\e820'}.icon-puzzle-outline:before{content:'\e821'}.icon-ng:before{content:'\e822'}.icon-ok:before{content:'\e823'}.icon-link:before{content:'\e824'}.icon-down-circle:before{content:'\e826'}.icon-api:before{content:'\e828'}.icon-right-circle:before{content:'\e829'}.icon-down-open:before{content:'\e82a'}.icon-right-open:before{content:'\e82b'}.icon-copy:before{content:'\f0c5'}.icon-gamepad:before{content:'\f11b'}.icon-fork:before{content:'\f126'}.icon-mlops-solid:before{content:'\f135'}.icon-edu-solid:before{content:'\f19d'}.icon-others-solid:before{content:'\f1b3'}.icon-ds-solid:before{content:'\f1c0'}.icon-chart-area:before{content:'\f1fe'}.icon-chart-pie:before{content:'\f200'}.icon-ts:before{content:'\f201'}.icon-clone:before{content:'\f24d'}</style><body><script>function showTheme() {
        const btn = document.getElementById("toggle-dark-light");
        let toggleIcon = btn.firstElementChild;
        const currentTheme = localStorage.getItem("theme");
        if (currentTheme === "dark") {
          document
            .body
            .classList
            .toggle("dark-theme");
          toggleIcon.src = "/img_src/nav/sun.svg";
        } else if (currentTheme === "light") {
          document
            .body
            .classList
            .toggle("light-theme");
          toggleIcon.src = "/img_src/nav/moon.svg";
        }
      }
      function showContent() {
        document.body.style.visibility = 'visible';
        document.body.style.opacity = 1;
      }
      window.addEventListener('DOMContentLoaded', (event) => {
        showTheme();
        showContent();
      });</script><header class="wave-border wave-border-post"><nav><div id=nav><a href=/ class="nav-item no-effect"><img alt=home class=keep-original src=/img_src/nav/home.svg height=18 width=18> <span>Thi</span> </a><a href=/about/ class="nav-item no-effect"><img alt=about class=keep-original src=/img_src/nav/about.svg height=15 width=15> <span>About</span></a><div class=nav-search id=nav-search><form><input aria-label='search notes (press "/" to focus & "ESC" to lose)' autocomplete=off class=nav-search__input id=nav-search__input onfocusin=inFocus(this) placeholder='search notes (press "/" to focus & "ESC" to lose)' type=search></form><div id=nav-search__result-container style="display: none;"><ul id=nav-search__ul></ul><div id=nav-search__no-result style="display: none;"><p>No results found.</div></div></div><span class="nav-item no-effect nav-dark-light" href="" id=toggle-dark-light><img alt=light-mode class=keep-original src=/img_src/nav/moon.svg height=20 width=20> </span><a href=https://github.com/dinhanhthi class="nav-item no-effect nav-github" target=_blank><img alt=github class=keep-original src=/img_src/nav/github.svg height=20 width=20></a></div><div class=reading-progress-container><div id=reading-progress aria-hidden=true></div></div></nav><script>var divNavSearch=document.getElementById("nav-search"),divRes=document.getElementById("nav-search__result-container"),ulRes=document.getElementById("nav-search__ul");function inFocus(e){""!=e.value&&(divRes.style.display="block")}var isOnDiv=!1;divRes.addEventListener("mouseover",(function(){isOnDiv=!0})),divRes.addEventListener("mouseout",(function(){isOnDiv=!1}));var inputSearch=document.getElementById("nav-search__input");window.addEventListener("click",(function(){ulRes.getElementsByTagName("li").length>=1&&isOnDiv||(divRes.style.display="none")})),inputSearch.addEventListener("click",(e=>{e.stopPropagation()}));const addSelected=e=>{ulRes.querySelectorAll("li").forEach((e=>{e.classList.remove("selected")})),e.classList.add("selected")};var isInView=(e,t)=>{var n=e.offsetTop+e.offsetHeight-t.scrollTop>t.offsetHeight;return e.offsetTop<t.scrollTop?"above":n?"below":"in"};const updateScroll=(e,t)=>{e.offsetTop+e.offsetHeight-t.scrollTop>t.offsetHeight&&(t.scrollTop=e.offsetTop+e.offsetHeight-t.offsetHeight),e.offsetTop<t.scrollTop&&(t.scrollTop=e.offsetTop)};document.onkeydown=e=>{checkInInput=document.activeElement==inputSearch,"/"!==e.key||checkInInput||(e.stopPropagation(),e.preventDefault(),inputSearch.focus())},document.addEventListener("focusin",(e=>{divNavSearch.contains(e.target)||(divRes.style.display="none")})),inputSearch.onkeydown=e=>{if("Enter"===e.key){e.stopPropagation(),e.preventDefault();var t=ulRes.querySelector('li[class*="selected"]');window.location.href=t.getElementsByClassName("item__content")[0].firstChild.firstChild.href}"Escape"===e.key&&(divRes.style.display="none",inputSearch.blur())},divNavSearch.onkeydown=e=>{if(hasResult=ulRes.getElementsByTagName("li").length>=1,hasResult){["ArrowUp","ArrowDown"].indexOf(e.key)>-1&&e.preventDefault();var t=ulRes.firstChild,n=ulRes.lastChild,s=ulRes.querySelector('li[class*="selected"]');switch(e.key){case"ArrowUp":nextLi=s&&s!=t?s.previousSibling:n,addSelected(nextLi),s=nextLi,updateScroll(s,divRes);break;case"ArrowDown":nextLi=s&&s!=n?s.nextSibling:t,addSelected(nextLi),s=nextLi,updateScroll(s,divRes)}}};</script><div class=header-container><div class="header-logo post-layout"><img alt="11ty + Nunjucks" class=keep-original src=/img/header/11ty.jpg height=55 width=55></div><h1>11ty + Nunjucks</h1><div id=more-info><div id=note-tag><a href=/tags/web-dev/ id=category }>Web Dev</a> <a href=/tags/static-site-generators/ id=category }>Static Site Generators</a> <a href=/tags/11ty/ id=category }>11ty</a></div><div id=last-modified>Last modified 6 months ago / <a href=https://github.com/dinhanhthi/notes/edit/master/./posts/web-dev/2021-10-16-11ty-nunjucks.md>Edit on Github</a></div></div></div></header><main class="" id=main-wrapper><article class=post-container><div class="container mt-2 normal page-note"><div class="toc toc-common toc-js"><div class=ol-container><div class=toc-heading>In this note</div><ol><li><a href=#installation>Installation</a><ol><li><a href=#setting-up-with-netlify>Setting up with Netlify</a></ol><li><a href=#templating>Templating</a><ol><li><a href=#scss-to-css>SCSS to CSS</a><li><a href=#using-postcss%3F>Using postcss?</a><li><a href=#nunjucks-inside-css>Nunjucks inside css</a><li><a href=#bootstrap-%2B-11ty>Bootstrap + 11ty</a><li><a href=#google-fonts>Google Fonts</a><li><a href=#using-fontello-icons>Using fontello icons</a><li><a href=#layout>Layout</a><li><a href="#post's-components">Post's components</a><li><a href=#custom-frontmatter-fields>Custom frontmatter fields</a><li><a href=#recognize-home-page>Recognize home page</a><li><a href=#frontmatter>Frontmatter</a><li><a href=#list-of-posts>List of posts</a><li><a href=#posts-by-categories-%2F-tags>Posts by categories / tags</a><li><a href=#next-%2F-previous-post>Next / Previous post</a></ol><li><a href=#custom-js-scripts>Custom js scripts</a><ol><li><a href=#using-custom-js-files-for-each-page>Using custom js files for each page</a><li><a href=#minify-js-file>Minify js files</a></ol><li><a href=#last-modified-date>Last modified date</a><li><a href=#insert-code-highlight>Insert code highlight</a><ol><li><a href=#insert-liquid-%2F-nunjuck-code>Insert liquid / nunjuck code</a></ol><li><a href=#math-equations>Math equations</a><ol><li><a href=#mathjax>Mathjax</a><li><a href=#katex-(my-choice)>KaTeX (my choice)</a></ol><li><a href=#figures>Figures</a><ol><li><a href=#using-relative-path%3F>Using relative path?</a></ol><li><a href=#markdown>Markdown</a><ol><li><a href=#markdown-it-%26-its-plugins>markdown-it & its plugins</a><li><a href=#custom-container>Custom container</a><li><a href=#markdown-inside-.njk>Markdown inside .njk</a><li><a href=#html%2Fnunjucks-tags-inside-.md>HTML/nunjucks tags inside .md</a><li><a href=#custom-block-shortcodes>Custom block shortcodes</a><li><a href=#custom-inline-shortcodes>Custom inline shortcodes</a></ol><li><a href=#search>Search</a><li><a href=#data-files>Data files</a><ol><li><a href=#apply-data-for-all-posts-in-a-directory>Apply data for all posts in a directory</a><li><a href=#using-external-data-files-with-environment-env>Using external data files with environment env</a><li><a href=#local-data-files>Local data files</a><li><a href=#fetched-json-from-an-external-source>Fetched JSON from an external source</a></ol><li><a href=#working-style>Working style</a><ol><li><a href=#custom-environment>Custom environment</a><li><a href=#incremental>Incremental</a><li><a href=#working-with-themes-locally%3F>Working with themes locally?</a></ol><li><a href=#nunjucks-things>Nunjucks things</a><li><a href=#errors>Errors</a><li><a href=#references>References</a></ol></div></div><div class=warning><p>This is not a tutorial to create an 11ty website, this's a note! You can find some <strong>very new and useful</strong> techniques on this note alongside <a href=https://www.11ty.dev/docs/ >the official documentation</a>.</div><div class=success><p>This note will be always updated!</div><h2 id=installation tabindex=-1>Installation <a href=#installation class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><p>ðŸ‘‰ First, install <a href=/nodejs-npm>nodejs</a>.<br>ðŸ‘‰ Using <a href=https://github.com/11ty/eleventy-base-blog>this starter template</a> or <a href=https://github.com/google/eleventy-high-performance-blog>Google's high performance statrer theme</a> (recommended).<pre class=language-bash><code class=language-bash><span class="token comment"># Install dependencies</span><br><span class="token function">npm</span> <span class="token function">install</span></code></pre><p>You should follow the installation steps given in the theme you choose.<h3 id=setting-up-with-netlify tabindex=-1>Setting up with Netlify <a href=#setting-up-with-netlify class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>Sometimes, 11ty takes too much time to build (especially on the task of optimizing images. On my site, it takes almost 10 minutes). You shouldn't use branch <code>master</code> to build you site because every time you make a push, Netlify will rebuild your whole site. You should create and use a new branch, so-called <code>prod</code> instead.<div class=hsbox><div class=hs__title><strong>Idea 1</strong> -- manually build but should not use many times</div><div class=hs__content><p>On Netlify, go to <strong>Site settings</strong> > <strong>Build & deploy</strong>:<p indent=""><ul><li><strong>Build settings</strong>:<ul><li><em>Build command</em>: <code>npm run build</code> (depends on your site)<li><em>Publish directory</em>: <strong>_site</strong> (depends on your site)<li><em>Builds</em>: <strong>Active builds</strong></ul><li><strong>Deploy contexts</strong>:<ul><li><em>Production branch</em>: <strong>prod</strong> (the same as the your created branch)<li><em>Deploy previews</em>: <strong>Don't deploy pull requests</strong> (you don't want someone pull request and it auto make a deploy)<li><em>Branch deploys</em>: <strong>Deploy only the production branch</strong>.</ul></ul></div></div><p>The weakness of <em>Idea 1</em> is that you let netlify build again your whole site with its resources. That's why it takes too much time! Remember that, you have only 300 free minutes to build.<div class=hsbox><div class=hs__title><strong>Idea 2</strong> -- build locally and push <code>_site</code> only</div><div class=hs__content><p>You should know that, even if your site contains only html files, netlify is able to make it live as usual.<ol><li><p>Working mainly on branch <code>dev</code> like in Idea 1.<li><p>Create a branch, so-called <code>_site</code> from <code>dev</code>. In this branch, delete all folders except <code>_site</code>, <code>node_modules</code>, <code>.git</code>, <code>.gitignore</code>.<li><p>Modify <code>.gitignore</code> (exclude all except <code>_site</code> folder to push to github),<pre class=language-bash><code class=language-bash>/*<br>/*/<br><span class="token operator">!</span>/_site/</code></pre><li><p>Now, we tell netlify build our site from branch <code>_site</code> (which contains html files only so it doesn't take time to build anything, it's really fast!)<ul><li><strong>Build settings</strong>:<ul><li><em>Base directory</em>: Not set.<li><em>Build command</em>: Not set.<li><em>Publish directory</em>: _site/<li><em>Builds</em>: Active.</ul><li><strong>Deploy context</strong>: - <em>Production branch</em>: <em>site</em> - <em>Deploy previews</em>: Donâ€™t deploy pull requests - <em>Branch deploys</em>: Deploy only the production branch</ul></ol></div></div><div class=hsbox><div class=hs__title>Example workflow with <a href=http://dinhanhthi.com>dinhanhthi.com</a></div><div class=hs__content><p>From the <a href=https://github.com/dinhanhthi/dinhanhthi.com>main repo</a>, I clone to 2 different folders<pre class=language-bash><code class=language-bash><span class="token operator">|</span>- dinhanhthi.com <span class="token comment"># &lt;- branch "dev"</span><br><span class="token operator">|</span>- dat.com 				<span class="token comment"># &lt;- branch "_site"</span></code></pre><p>On <code>dat.com</code>, I create a script called <code>ud_site.sh</code> which contains,<pre class=language-bash><code class=language-bash><span class="token class-name builtin">echo</span> <span class="token string">"Start building site"</span><br><span class="token class-name builtin">cd</span> <span class="token punctuation">..</span>/dinhanhthi.com/<br><span class="token function">npm</span> run build<br><span class="token class-name builtin">cd</span> <span class="token punctuation">..</span>/dat.com/<br><span class="token class-name builtin">echo</span> <span class="token string">"Start copying...."</span><br><span class="token function">cp</span> -Rf <span class="token punctuation">..</span>/dinhanhthi.com/_site/* _site/<br><span class="token class-name builtin">echo</span> <span class="token string">"End copying"</span><br><span class="token function">git</span> <span class="token function">add</span> <span class="token class-name builtin">.</span><br><span class="token function">git</span> commit -m <span class="token string">"Updated: <span class="token variable"><span class="token variable">`</span><span class="token function">date</span> +<span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token variable">`</span></span>"</span><br><span class="token function">git</span> push</code></pre><p>For covenience, I create an alias in bash shell,<pre class=language-bash><code class=language-bash><span class="token class-name builtin">alias</span> <span class="token variable assign-left">update_dat</span><span class="token operator">=</span><span class="token string">'cd ~/git/dat.com && sh ud_site.sh && cd -1'</span></code></pre><p>From now, whenever I wanna build and deploy my site on netlify, I just run,<pre class=language-bash><code class=language-bash>update_dat</code></pre><p>I saved from 1h of building to 2m of building on netlify with this method!</div></div><h2 id=templating tabindex=-1>Templating <a href=#templating class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><h3 id=scss-to-css tabindex=-1>SCSS to CSS <a href=#scss-to-css class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><div class=hsbox><div class=hs__title>If you use <a href=https://www.npmjs.com/package/node-sass>node-sass</a></div><div class=hs__content><div class=col-2-equal><pre class=language-bash><code class=language-bash><span class="token comment"># Folder's structure</span><br>css/main.scss<br>css/components/_fonts.scss <span class="token comment"># with _</span><br>css/components/<span class="token punctuation">..</span><span class="token punctuation">..</span></code></pre><pre class=language-json><code class=language-json><span class="token comment">// in main.scss</span><br>@import <span class="token string">"./components/font"</span>; <span class="token comment">// without extension</span><br><br><span class="token comment">// package.json</span><br><span class="token punctuation">{</span><br>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"js-build"</span><span class="token operator">:</span> <span class="token string">"node-sass css/main.scss -o css"</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre></div><pre class=language-html><code class=language-html><span class="token comment">&lt;!-- in &lt;head> --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>css/main.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre></div></div><div class=hsbox><div class=hs__title>If you use <a href=https://rollupjs.org/guide/en/ >rollup</a> (like this site)</div><div class=hs__content><div class=col-2-equal><pre class=language-bash><code class=language-bash><span class="token comment"># Folder's structure</span><br>css/main.scss<br>css/components/_fonts.scss<br>css/components/<span class="token punctuation">..</span><span class="token punctuation">..</span><br>css/main_input.js</code></pre><pre class=language-json><code class=language-json><span class="token comment">// in main.scss</span><br>@import <span class="token string">"./components/font"</span>; <span class="token comment">// without extension</span><br><br><span class="token comment">// package.json</span><br><span class="token punctuation">{</span><br>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"js-build"</span><span class="token operator">:</span> <span class="token string">"rollup -c rollup.config.js"</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre></div><pre class=language-js><code class=language-js><span class="token keyword">import</span> scss <span class="token keyword">from</span> <span class="token string">"rollup-plugin-scss"</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span><br>  <span class="token punctuation">{</span><br>    <span class="token comment">// plugin 1</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span><br>    <span class="token property literal-property">input</span><span class="token operator">:</span> <span class="token string">"css/main_input.js"</span><span class="token punctuation">,</span> <span class="token comment">// where the input file containing import of main.scss</span><br>    <span class="token property literal-property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property literal-property">file</span><span class="token operator">:</span> <span class="token string">"css/main.js"</span><span class="token punctuation">,</span> <span class="token comment">// intermediate file which can be translated to css/main.css</span><br>      <span class="token property literal-property">format</span><span class="token operator">:</span> <span class="token string">"esm"</span><span class="token punctuation">,</span> <span class="token comment">// still not know</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token property literal-property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>      <span class="token function">scss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// there are other configs</span><br>    <span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class=language-html><code class=language-html><span class="token comment">&lt;!-- in &lt;head> --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>css/main.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre></div></div><div class=hsbox><div class=hs__title>If you use <a href=https://parceljs.org>parcel</a></div><div class=hs__content><div class=col-2-equal><pre class=language-bash><code class=language-bash><span class="token comment"># install</span><br><span class="token function">npm</span> i parcel-bundler<br><span class="token function">npm</span> i npm-run-all -D</code></pre><pre class=language-bash><code class=language-bash><span class="token comment"># folder structure</span><br>_assets/css/main.scss<br>___________/_bootstrap.scss<br>_______/js/main.js</code></pre></div><div class=col-2-equal><pre class=language-bash><code class=language-bash><span class="token comment"># main.scss</span><br>@import <span class="token string">"./bootstrap"</span><span class="token punctuation">;</span></code></pre><pre class=language-bash><code class=language-bash><span class="token comment"># main.js</span><br><span class="token function">import</span> <span class="token string">"./../css/main.scss"</span><span class="token punctuation">;</span></code></pre></div><pre class=language-bash><code class=language-bash><span class="token comment"># package.json</span><br><span class="token string">"scripts"</span><span class="token class-name builtin">:</span> <span class="token punctuation">{</span><br>    <span class="token string">"start"</span><span class="token class-name builtin">:</span> <span class="token string">"npm-run-all --parallel dev:*"</span>,<br>    <span class="token string">"build"</span><span class="token class-name builtin">:</span> <span class="token string">"run-s prod:*"</span>,<br>    <span class="token string">"dev:eleventy"</span><span class="token class-name builtin">:</span> <span class="token string">"eleventy --serve"</span>,<br>    <span class="token string">"dev:parcel"</span><span class="token class-name builtin">:</span> <span class="token string">"parcel watch ./_assets/js/main.js --out-dir ./_site/assets"</span>,<br>    <span class="token string">"prod:eleventy"</span><span class="token class-name builtin">:</span> <span class="token string">"eleventy"</span>,<br>    <span class="token string">"prod:parcel"</span><span class="token class-name builtin">:</span> <span class="token string">"parcel build ./_assets/js/main.js --out-dir ./_site/assets"</span>,<br><span class="token punctuation">}</span>,</code></pre><pre class=language-bash><code class=language-bash><span class="token comment"># run</span><br><span class="token function">npm</span> start</code></pre></div></div><h3 id=using-postcss%3F tabindex=-1>Using <a href=https://github.com/postcss/postcss><code>postcss</code></a>? <a href=#using-postcss%3F class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><pre class=language-bash><code class=language-bash><span class="token comment"># Install it and its plugin first</span><br><span class="token function">npm</span> <span class="token function">install</span> autoprefixer postcss postcss-cli</code></pre><pre class=language-bash><code class=language-bash><span class="token comment"># Create postcss.config.js on the same folder as package.json</span><br>module.exports <span class="token operator">=</span> <span class="token punctuation">{</span><br>  plugins: <span class="token punctuation">[</span>require<span class="token punctuation">(</span><span class="token string">"autoprefixer"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>,<br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre class=language-json><code class=language-json><span class="token comment">// npm command in package.json</span><br><span class="token property">"css:prefix"</span><span class="token operator">:</span> <span class="token string">"postcss src/css/main.css --use autoprefixer --replace true"</span></code></pre><pre class=language-bash><code class=language-bash><span class="token comment"># Watch (cannot use with `--replace`)</span><br>postcss --watch main.css -o main_.css --use autoprefixer</code></pre><h3 id=nunjucks-inside-css tabindex=-1>Nunjucks inside css <a href=#nunjucks-inside-css class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br>  <span class="token selector">.bg</span> <span class="token punctuation">{</span><br>    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>{{ bg-image }}<span class="token punctuation">)</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br><br><span class="token comment">&lt;!-- or --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token language-css css value"><span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>{{ bg-image }}<span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br></code></pre><h3 id=bootstrap-%2B-11ty tabindex=-1>Bootstrap + 11ty <a href=#bootstrap-%2B-11ty class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>ðŸ‘‰ <a href=https://getbootstrap.com>Bootstrap's homepage</a><br>ðŸ‘‰ <a href=https://formden.com/blog/isolate-bootstrap>How to Isolate Bootstrap CSS to Avoid Conflicts (using LESS)</a><pre class=language-bash><code class=language-bash><span class="token comment"># install</span><br><span class="token function">npm</span> i bootstrap jquery popper.js</code></pre><p>Using alongside with section "<a href=#scss-to-css>SCSS to CSS</a>".<div class=col-2-equal><pre class=language-bash><code class=language-bash><span class="token comment"># folder structure</span><br>_assets/css/main.scss<br>_______/vender/_bootstrap.scss</code></pre><pre class=language-scss><code class=language-scss><span class="token comment">// main.scss</span><br><span class="token keyword">@import</span> <span class="token string">"./vender/bootstrap"</span><span class="token punctuation">;</span></code></pre></div><pre class=language-scss><code class=language-scss><span class="token comment">// _bootstrap.scss</span><br><span class="token comment">// all components</span><br><span class="token comment">// @import "./../../../node_modules/bootstrap/scss/bootstrap.scss";</span><br><br><span class="token comment">// Required</span><br><span class="token comment">// check more: https://getbootstrap.com/docs/4.5/getting-started/theming/#importing</span><br><span class="token keyword">@import</span> <span class="token string">"./../../../node_modules/bootstrap/scss/functions"</span><span class="token punctuation">;</span><br><span class="token keyword">@import</span> <span class="token string">"./../../../node_modules/bootstrap/scss/variables"</span><span class="token punctuation">;</span><br><span class="token keyword">@import</span> <span class="token string">"./../../../node_modules/bootstrap/scss/mixins"</span><span class="token punctuation">;</span></code></pre><h3 id=google-fonts tabindex=-1>Google Fonts <a href=#google-fonts class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><ul><li>Put fonts in <code>fonts/</code> and use <a href="http://google-webfonts-helper.herokuapp.com/fonts/open-sans?subsets=latin">this tool</a> to generate <code>.woff</code>, <code>woff2</code> from Google Fonts. <strong>Be careful on the location will be used on your site</strong>.<li>Copy and paste to <code>css/main.scss</code>.<li>If you have a problem with <code>Content-Security-Policy</code>, check <a href=/for-me-only/#errors%3F>this section</a>.</ul><h3 id=using-fontello-icons tabindex=-1>Using fontello icons <a href=#using-fontello-icons class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>More icon fonts than Fontawesome. Choose fonts on <a href=https://fontello.com/ >fontello</a> > "Get config only".<pre class=language-bash><code class=language-bash><span class="token comment"># install fontello-cli</span><br><span class="token function">npm</span> <span class="token function">install</span> -g fontello-cli<br><br><span class="token comment"># Remove old session (if changing the current icons, not adding new ones)</span><br><span class="token function">rm</span> .fontello-session<br><br><span class="token comment"># install / update new icon</span><br>fontello-cli --config src/fontello/config.json --css src/fontello/css --font src/fontello/font <span class="token function">install</span></code></pre><pre class=language-js><code class=language-js><span class="token comment">// .eleventy.js</span><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addPassthroughCopy</span><span class="token punctuation">(</span><span class="token string">"src/fontello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/src/fontello/css/fontello.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></code></pre><pre class=language-html><code class=language-html><span class="token comment">&lt;!-- usage --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon-doc<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span></code></pre><p>Check the code <code>-doc</code> in <code>src/fontello/config.json</code>, field <code>"css"</code>.<p><strong>Note</strong>: Sometimes, there are duplicates hexa/decimal code (although the names are different). On fontello website, navigate to "Customize Codes" tab, find duplicates and change them. Note that, in this tab, the codes are shown in hexa base but in the downlowded config, the codes are shown in decimal based (field <code>"code"</code>). You can use <a href=https://www.rapidtables.com/convert/number/decimal-to-hex.html>this site</a> to convert between them.<h3 id=layout tabindex=-1>Layout <a href=#layout class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><div class=col-2-equal><pre class=language-bash><code class=language-bash><span class="token function">mkdir</span> _includes/layouts<br><span class="token function">touch</span> _includes/layouts/post.njk</code></pre><pre class=language-js><code class=language-js><span class="token comment">// create an alias</span><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addLayoutAlias</span><span class="token punctuation">(</span><span class="token string">"post"</span><span class="token punctuation">,</span> <span class="token string">"layouts/post.njk"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre class=language-bash><code class=language-bash><span class="token comment"># update changes</span><br><span class="token function">touch</span> .eleventy.js</code></pre><pre class=language-yml><code class=language-yml><span class="token comment"># then use</span><br><span class="token punctuation">---</span><br><span class="token atrule key">layout</span><span class="token punctuation">:</span> post<br><span class="token punctuation">---</span></code></pre></div><h4 id=includes tabindex=-1>Includes <a href=#includes class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h4><p>Split layout into parts and include them in the main file.<pre class=language-js><code class=language-js><span class="token comment">// in _includes/components/head.njk</span><br><span class="token punctuation">{</span><span class="token operator">%</span> include <span class="token string">"components/head.njk"</span> <span class="token operator">%</span><span class="token punctuation">}</span><br><br><span class="token comment">// custom parameter</span><br><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">set</span> customClass <span class="token operator">=</span> <span class="token string">'list-homepage'</span> <span class="token operator">%</span><span class="token punctuation">}</span><br><span class="token punctuation">{</span><span class="token operator">%</span> include <span class="token string">"components/postslist.njk"</span> <span class="token operator">%</span><span class="token punctuation">}</span><br><span class="token comment">// inside postlist.njk, just use {{ customClass }}</span><br></code></pre><h4 id=template-inheritance tabindex=-1>Template inheritance <a href=#template-inheritance class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h4><p>Read this <a href=https://mozilla.github.io/nunjucks/templating.html#template-inheritance>tutorial</a>.<div class=col-2-equal><pre class=language-html><code class=language-html><span class="token comment">&lt;!-- _includes/layouts/base.njk --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">></span></span>{% block headerLogo %}{% endblock %}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br></code></pre><pre class=language-html><code class=language-html><span class="token comment">&lt;!-- _includes/layouts/post.njk --></span><br>--- --- {% extends "layouts/base.njk" %} {% block headerLogo%}<br><span class="token comment">&lt;!-- only appear on post layout --></span><br>{% endblock %} </code></pre></div><h3 id="post's-components" tabindex=-1>Post's components <a href="#post's-components" class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>ðŸ‘‰ <a href=https://www.11ty.dev/docs/data-eleventy-supplied/#page-variable-contents>Page variable components</a>.<pre class=language-js><code class=language-js><span class="token comment">// URL can be used in &lt;a href> to link to other templates</span><br><span class="token property literal-property">url</span><span class="token operator">:</span> <span class="token string">"/current/page/myFile/"</span><span class="token punctuation">,</span><br><br><span class="token comment">// For permalinks: inputPath filename minus template file extension (New in v0.3.4)</span><br><span class="token property literal-property">fileSlug</span><span class="token operator">:</span> <span class="token string">"myFile"</span><span class="token punctuation">,</span><br><br><span class="token comment">// For permalinks: inputPath minus template file extension (New in v0.9.0)</span><br><span class="token property literal-property">filePathStem</span><span class="token operator">:</span> <span class="token string">"/current/page/myFile"</span><span class="token punctuation">,</span><br><br><span class="token comment">// JS Date Object for current page (used to sort collections)</span><br><span class="token property literal-property">date</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br><br><span class="token comment">// The path to the original source file for the template</span><br><span class="token comment">// Note: this will include your input directory path!</span><br><span class="token property literal-property">inputPath</span><span class="token operator">:</span> <span class="token string">"./current/page/myFile.md"</span><span class="token punctuation">,</span><br><br><span class="token comment">// Depends on your output directory (the default is _site)</span><br><span class="token comment">// You probably wonâ€™t use this: `url` is better.</span><br><span class="token property literal-property">outputPath</span><span class="token operator">:</span> <span class="token string">"./_site/current/page/myFile/index.html"</span><br><br><span class="token property literal-property">templateContent</span><span class="token operator">:</span> <span class="token comment">//the rendered content of this template. This does not include layout wrappers.</span><br><br><span class="token property literal-property">data</span><span class="token operator">:</span> <span class="token comment">// all data for this piece of content (includes any data inherited from layouts)</span><br><span class="token comment">// self-defined frontmatter tags can be found here</span></code></pre><div class=info><p>For ones who wanna get only the content (escape HTML tags and special characters) of the post:<pre class=language-bash><code class=language-bash><span class="token punctuation">{</span><span class="token punctuation">{</span> page.templateContent <span class="token operator">|</span> dump <span class="token operator">|</span> safe <span class="token operator">|</span> striptags<span class="token punctuation">(</span>true<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><br></code></pre></div><h3 id=custom-frontmatter-fields tabindex=-1>Custom frontmatter fields <a href=#custom-frontmatter-fields class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>Suppose you use <code>specialTitle</code> in the frontmatter of your page (eg. <code>index.njk</code>). You can use it in the template, eg. <code>header.njk</code>, as<pre class=language-html><code class=language-html>{% if specialTitle %} {# content #} {% endif %}<br></code></pre><h3 id=recognize-home-page tabindex=-1>Recognize home page <a href=#recognize-home-page class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><pre class=language-html><code class=language-html>{% set pageUrlLength = page.url | length %} </code></pre><p>If <code>pageUrlLength > 1</code>, it's not home page!<h3 id=frontmatter tabindex=-1>Frontmatter <a href=#frontmatter class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><div class=col-2-equal><pre class=language-yml><code class=language-yml><span class="token punctuation">---</span><br><span class="token atrule key">title</span><span class="token punctuation">:</span> Title of the post<br><span class="token atrule key">description</span><span class="token punctuation">:</span> description of the post<br><span class="token atrule key">date</span><span class="token punctuation">:</span> <span class="token number datetime">2020-09-11</span><br><span class="token atrule key">layout</span><span class="token punctuation">:</span> layouts/post.njk<br><span class="token punctuation">---</span></code></pre><pre class=language-yml><code class=language-yml><span class="token punctuation">---</span><br><span class="token atrule key">tags</span><span class="token punctuation">:</span><br>  <span class="token punctuation">-</span> default<br><span class="token comment"># or</span><br><span class="token atrule key">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>tag 1<span class="token punctuation">,</span> tag 2<span class="token punctuation">]</span><br><span class="token punctuation">---</span></code></pre></div><h3 id=list-of-posts tabindex=-1>List of posts <a href=#list-of-posts class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>Normal,<pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><br>  {% for post in collections.posts %}<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ post.url | url }}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> {{ post.data.title }} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>  {% endfor %}<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br></code></pre><div class=info><p>Other default variable (like <code>post.url</code>) can be found <a href=https://www.11ty.dev/docs/collections/#collection-item-data-structure>here</a>. Note that, you can use <code>page.templateContent</code> for the content of a page in some collections (not tested yet but you can try!<sup><a href=https://www.11ty.dev/docs/collections/ target=_blank rel="noopener noreferrer">[ref]</a></sup>).</div><h4 id=sort-posts-by-titles tabindex=-1>Sort posts by titles <a href=#sort-posts-by-titles class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h4><p><strong>Update</strong>: Below method is old (a hard way), you can refer to <a href=https://www.11ty.dev/docs/collections/#collection-api-methods>this guide</a>.<pre class=language-html><code class=language-html><span class="token comment">&lt;!-- Create a new list --></span><br>{% set newPostList = [] %} {% for post in collections.posts %} {% set<br>newPostList = (newPostList.push({title: post.data.title, url: post.url}),<br>newPostList) %} {% endfor %}<br><br><span class="token comment">&lt;!-- list of post by alphabet --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><br>  {% for post in newPostList|sort(attribute='title') %}<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ post.url | url }}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> {{ post.title }} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>  {% endfor %}<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br></code></pre><h3 id=posts-by-categories-%2F-tags tabindex=-1>Posts by categories / tags <a href=#posts-by-categories-%2F-tags class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>In this case, <mark>we consider a category as the first tag</mark> of a post. For example, if a post has tags <code>tags: [tag 1, tag 2, tag 3]</code>, then <code>tag 1</code> will be its category!<div class=col-2-equal><pre class=language-json><code class=language-json><span class="token comment">// _data/categories.json</span><br><span class="token punctuation">[</span><br>  <span class="token punctuation">{</span><br>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Cat 1"</span><span class="token punctuation">,</span><br>    <span class="token property">"icon"</span><span class="token operator">:</span> <span class="token string">"/img/cats/cat_1.svg"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span><br>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Cat 2"</span><span class="token punctuation">,</span><br>    <span class="token property">"icon"</span><span class="token operator">:</span> <span class="token string">"/img/cats/cat_2.svg"</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">]</span></code></pre><pre class=language-html><code class=language-html>{% for item in categories %}<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>category-wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>{{ item.icon }} {{ item.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post-list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    {% for post in collections[item.name] %}<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ post.url }}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>{{ post.data.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>    {% endfor %}<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>{% endfor %} </code></pre></div><h4 id=external-posts tabindex=-1>External posts <a href=#external-posts class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h4><p>If you wanna add external posts (not generated by 11ty from <code>.md</code> files), do below steps. For example, on this site, I cretae some pages created by <a href=https://www.notion.so/ >Notion</a> and I wanna add them to category <code>MOOC</code>.<p><strong>Remark</strong>: This section is used with <a href=#posts-by-categories-%2F-tags>section "posts by categories"</a> and <a href=#sort-posts-by-title>section "sort posts by title"</a>.<pre class=language-json><code class=language-json><span class="token comment">// _data/cat_ex_posts.json</span><br><span class="token punctuation">[</span><br>  <span class="token punctuation">{</span><br>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"DL4 - Convolutional Neural Network (CNN)"</span><span class="token punctuation">,</span><br>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://www.notion.so/dinhanhthi/CNN-by-deeplearning-ai-a081d253fc2c4c0b99edd2757c759b9e"</span><span class="token punctuation">,</span><br>    <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"MOOC"</span><span class="token punctuation">,</span> <span class="token string">"Deep Learning"</span><span class="token punctuation">]</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span><br>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"DL5 - Sequence models"</span><span class="token punctuation">,</span><br>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://www.notion.so/dinhanhthi/CNN-by-deeplearning-ai-a081d253fc2c4c0b99edd2757c759b9e"</span><span class="token punctuation">,</span><br>    <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"MOOC"</span><span class="token punctuation">,</span> <span class="token string">"Deep Learning"</span><span class="token punctuation">]</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span><br>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"NLP by HSE"</span><span class="token punctuation">,</span><br>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://www.notion.so/dinhanhthi/NLP-by-HSE-20cec3e92201475eb4d48787954f3aa4"</span><span class="token punctuation">,</span><br>    <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"MOOC"</span><span class="token punctuation">,</span> <span class="token string">"NLP"</span><span class="token punctuation">]</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">]</span></code></pre><pre class=language-html><code class=language-html>{% for item in categories %} {% set postslist = collections[item.name] %} {% set<br>newPostListCat = [] %} {% for post in cat_ex_posts %} {% for tg in post.tags %}<br>{% if tg == item.name %} {% set more_post = true %} {% set newPostListCat =<br>(newPostListCat.push({title: post.title, url: post.url, tags: post.tags}),<br>newPostListCat) %} {% endif %} {% endfor %} {% endfor %} {% set newPostList = []<br>%} {% for post in postslist %} {% set newPostList = (newPostList.push({title:<br>post.data.title, url: post.url}), newPostList) %} {% endfor %} {% if more_post<br>%} {% for post in newPostListCat %} {% set newPostList =<br>(newPostList.push({title: post.title, url: post.url, tags: post.tags}),<br>newPostList) %} {% endfor %} {% endif %}<br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>category-wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>{{ item.icon }} {{ item.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post-list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    {% for post in newPostList %}<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ post.url }}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>{{ post.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>    {% endfor %}<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>{% endfor %} </code></pre><h3 id=next-%2F-previous-post tabindex=-1>Next / Previous post <a href=#next-%2F-previous-post class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><br>  {%- set nextPost = collections.posts | getNextCollectionItem(page) %} {%- if<br>  nextPost %}<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><br>    Next: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ nextPost.url | url }}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ nextPost.data.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>  {% endif %} {%- set previousPost = collections.posts |<br>  getPreviousCollectionItem(page) %} {%- if previousPost %}<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><br>    Previous:<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ previousPost.url | url }}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ previousPost.data.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>  {% endif %}<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br></code></pre><h2 id=custom-js-scripts tabindex=-1>Custom js scripts <a href=#custom-js-scripts class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><div class=col-2-equal><pre class=language-bash><code class=language-bash><span class="token comment"># Put scripts in</span><br><span class="token comment"># /src/main.js</span></code></pre><pre class=language-html><code class=language-html><span class="token comment">&lt;!-- in &lt;head> --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">async</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ <span class="token punctuation">'</span>/js/min.js<span class="token punctuation">'</span> | addHash }}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br></code></pre></div><p>Using <a href=https://rollupjs.org/ >rollupjs</a>,<pre class=language-js><code class=language-js><span class="token comment">// rollup.config.js</span><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span><br>  <span class="token punctuation">{</span><br>    <span class="token property literal-property">input</span><span class="token operator">:</span> <span class="token string">"src/main.js"</span><span class="token punctuation">,</span><br>    <span class="token property literal-property">output</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>      <span class="token punctuation">{</span><br>        <span class="token property literal-property">file</span><span class="token operator">:</span> <span class="token string">"js/min.js"</span><span class="token punctuation">,</span><br>        <span class="token property literal-property">format</span><span class="token operator">:</span> <span class="token string">"iife"</span><span class="token punctuation">,</span><br>        <span class="token property literal-property">sourcemap</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>        <span class="token property literal-property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">terser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><div class=warning><p>Using <code>rollup</code> as above way, we have only one output file <code>js.min.js</code>!</div><h3 id=using-custom-js-files-for-each-page tabindex=-1>Using custom js files for each page <a href=#using-custom-js-files-for-each-page class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>Suppose that you have a custom frontmatter <code>customJS: ["file1.js, file2.js"]</code> containing all custom js files. It means that the files <code>file1.js</code> and <code>file2.js</code> are presented only in this page! (If we integrate them in <code>main.js</code>, they will be integrated ub all other pages after being rendered even if they're useless in those pages).<pre class=language-html><code class=language-html>{% if customJS %} {% set js %} {% for file in customJS %} {% include "scripts/"<br>+ file %} {% endfor %} {% endset %}<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br>  <span class="token punctuation">{</span><br>    <span class="token punctuation">{</span><br>      js <span class="token operator">|</span> jsmin <span class="token operator">|</span> safe<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br>{% endif %} </code></pre><p>Where <code>jsmin</code> is a filter created in <a href=#minify-js-file>next section</a>. All files <code>file1.js</code>, <code>file2.js</code> are stored in <code>_includes/_scripts/</code>.<h3 id=minify-js-file tabindex=-1>Minify js files <a href=#minify-js-file class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><pre class=language-js><code class=language-js>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addNunjucksAsyncFilter</span><span class="token punctuation">(</span><br>    <span class="token string">"jsmin"</span><span class="token punctuation">,</span><br>    <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">code<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">try</span> <span class="token punctuation">{</span><br>        <span class="token keyword">const</span> minified <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">minify</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> minified<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Terser error: "</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Usage (<code>_includes/scripts/search.js</code>),<pre class=language-html><code class=language-html>{% set js %} {% include "scripts/search.js" %} {% endset %}<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br>  <span class="token punctuation">{</span><br>    <span class="token punctuation">{</span><br>      js <span class="token operator">|</span> jsmin <span class="token operator">|</span> safe<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br></code></pre><h2 id=last-modified-date tabindex=-1>Last modified date <a href=#last-modified-date class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><pre class=language-js><code class=language-js><span class="token comment">// .eleventy.js</span><br><span class="token keyword">const</span> <span class="token punctuation">{</span> DateTime <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"luxon"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">"readableDate"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">dateObj</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> DateTime<span class="token punctuation">.</span><span class="token function">fromJSDate</span><span class="token punctuation">(</span>dateObj<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token property literal-property">zone</span><span class="token operator">:</span> <span class="token string">"utc"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFormat</span><span class="token punctuation">(</span><br>      <span class="token string">"dd LLL yyyy"</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#valid-date-string</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">"htmlDateString"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">dateObj</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> DateTime<span class="token punctuation">.</span><span class="token function">fromJSDate</span><span class="token punctuation">(</span>dateObj<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token property literal-property">zone</span><span class="token operator">:</span> <span class="token string">"utc"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFormat</span><span class="token punctuation">(</span><span class="token string">"dd-LL-yyyy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">"sitemapDateTimeString"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">dateObj</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> dt <span class="token operator">=</span> DateTime<span class="token punctuation">.</span><span class="token function">fromJSDate</span><span class="token punctuation">(</span>dateObj<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token property literal-property">zone</span><span class="token operator">:</span> <span class="token string">"utc"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dt<span class="token punctuation">.</span>isValid<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> dt<span class="token punctuation">.</span><span class="token function">toISO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Last modified date,<pre class=language-html><code class=language-html>{{ page.inputPath | lastModifiedDate | htmlDateString }} </code></pre><h2 id=insert-code-highlight tabindex=-1>Insert code highlight <a href=#insert-code-highlight class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><p><strong>Code syntax highlight</strong>: Need <a href=https://www.11ty.dev/docs/plugins/syntaxhighlight/ >this plugin</a>. List of <a href=https://prismjs.com/#languages-list>supported languages</a>.<div class=col-2-equal><pre class=language-markdown><code class=language-markdown><span class="token important title"><span class="token punctuation">#</span> Highlight line 2</span><br><br><span class="token code"><span class="token punctuation">```</span><span class="token code-language">js/2</span><br><span class="token code-block language-js"><span class="token comment">// lines of codes</span></span><br><span class="token punctuation">```</span></span></code></pre><pre class=language-markdown><code class=language-markdown><span class="token important title"><span class="token punctuation">#</span> Highlight line 2 to 4</span><br><br><span class="token code"><span class="token punctuation">```</span><span class="token code-language">js/2-4</span><br><span class="token code-block language-js"><span class="token comment">// lines of codes</span></span><br><span class="token punctuation">```</span></span></code></pre><pre class=language-markdown><code class=language-markdown><span class="token important title"><span class="token punctuation">#</span> Highlight line 2, 4</span><br><br><span class="token code"><span class="token punctuation">```</span><span class="token code-language">js/2,4</span><br><span class="token code-block language-js"><span class="token comment">// lines of codes</span></span><br><span class="token punctuation">```</span></span></code></pre><pre class=language-markdown><code class=language-markdown><span class="token important title"><span class="token punctuation">#</span> Delete line 2 (red highlight)</span><br><br><span class="token important title"><span class="token punctuation">#</span> and add line 4 (green highlight)</span><br><br><span class="token code"><span class="token punctuation">```</span><span class="token code-language">js/4/2</span><br><span class="token code-block language-js"><span class="token comment">// lines of codes</span></span><br><span class="token punctuation">```</span></span></code></pre></div><h3 id=insert-liquid-%2F-nunjuck-code tabindex=-1>Insert liquid / nunjuck code <a href=#insert-liquid-%2F-nunjuck-code class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>Inline code, put <code>{% raw %}</code> and <code>{% endraw %}</code> around the keyword.<p>Code block,<pre class=language-js><code class=language-js><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span> js <span class="token punctuation">{</span><span class="token operator">%</span> raw <span class="token operator">%</span><span class="token punctuation">}</span><br><span class="token comment">// line of codes</span><br><span class="token punctuation">{</span><span class="token operator">%</span> endraw <span class="token operator">%</span><span class="token punctuation">}</span><br><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span></code></pre><h2 id=math-equations tabindex=-1>Math equations <a href=#math-equations class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><h3 id=mathjax tabindex=-1>Mathjax <a href=#mathjax class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>Using <a href=https://github.com/classeur/markdown-it-mathjax>markdown-it-mathjax</a><h3 id=katex-(my-choice) tabindex=-1>KaTeX (my choice) <a href=#katex-(my-choice) class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><div class=hsbox><div class=hs__title>KaTeX: Use <code>markdown-it-katex</code></div><div class=hs__content><p>Using <a href=https://github.com/iktakahiro/markdown-it-katex/ >markdown-it-katex</a> (use this version only),<pre class=language-js><code class=language-js><span class="token comment">// .eleventy.js</span><br><span class="token keyword">const</span> markdownIt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"markdown-it"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> markdownItKatex <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@iktakahiro/markdown-it-katex"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">let</span> markdownLibrary <span class="token operator">=</span> <span class="token function">markdownIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>markdownLibrary<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>markdownItKatex<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=language-html><code class=language-html><span class="token comment">&lt;!-- inside &lt;head> --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span><br>  <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><br>  <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css<span class="token punctuation">"</span></span><br><span class="token punctuation">/></span></span></code></pre><p>ðŸ’¡ <strong>Some tips</strong>: working with KaTeX<div class=col-2-equal><pre class=language-bash><code class=language-bash><span class="token comment"># working</span><br><span class="token variable">$$</span><br><span class="token punctuation">\</span>dfrac<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><br><span class="token variable">$$</span></code></pre><pre class=language-bash><code class=language-bash><span class="token comment"># not working</span><br>- Item<br><br>	<span class="token variable">$$</span><br>	<span class="token punctuation">\</span>dfrac<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><br>	<span class="token variable">$$</span><br>- Item</code></pre><pre class=language-bash><code class=language-bash><span class="token comment"># working again</span><br>- Item<br><br>  <span class="token variable">$$</span><span class="token punctuation">\</span>dfrac<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token variable">$$</span> <span class="token comment"># without \n</span><br>- Item<br></code></pre></div></div></div><p>In this site, I use <a href=https://www.npmjs.com/package/markdown-it-texmath><code>markdown-it-texmath</code></a>. I choose this because we can overcome the weakness of <code>markdown-it-katex</code> in case of breaking lines in list mode & it's <a href=https://goessner.github.io/markdown-it-texmath/index.html>more flexible</a> (you can try it online <a href=https://goessner.github.io/markdown-it-texmath/markdown-it-texmath-demo.html>here</a>).<p><strong>An important note</strong>: the original version has a problem of whitespace before and after <code>&lt;eq></code> tag in the inline mode. That why instead of seeing <code>aaa x aaa</code> with <code>aaa $x$ aaa</code>, we see <code>aaaxaaa</code>. I've changed (and reported <a href=https://github.com/goessner/markdown-it-texmath/issues/25>an issue</a>). For a moment, I use a modified version <a href=https://github.com/dinhanhthi/markdown-it-texmath>here</a>. <strong>Update</strong>: The author couldn't reproduce the issue I met (with version 0.8), he keep updating the plugin but I didn't try version 0.9. You better try it before trying my option!<pre class=language-bash><code class=language-bash><span class="token comment"># Install</span><br><span class="token comment"># npm i markdown-it-texmath --save-dev # original, whitespace problem</span><br><span class="token function">npm</span> i git+https://github.com/dinhanhthi/markdown-it-texmath.git --save-dev</code></pre><pre class=language-js><code class=language-js><span class="token comment">// .eleventy.js</span><br><span class="token keyword">const</span> tm <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"markdown-it-texmath"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// or local folder if you use a customized version</span><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  md <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"markdown-it"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>tm<span class="token punctuation">,</span> <span class="token punctuation">{</span><br>    <span class="token property literal-property">engine</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"katex"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token property literal-property">delimiters</span><span class="token operator">:</span> <span class="token string">"dollars"</span><span class="token punctuation">,</span><br>    <span class="token property literal-property">katexOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property literal-property">macros</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property string-property">"\\RR"</span><span class="token operator">:</span> <span class="token string">"\\mathbb{R}"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><div class=hsbox><div class=hs__title>ðŸ’¡ If you wanna modify yourself <code>markdown-it-texmath</code>?</div><div class=hs__content><p>Copy the cloned folder <code>markdown-it-temath</code> (except <code>.git</code>, <code>.gitignore</code>, <code>test/</code>, <code>package-lock.json</code>) to a so-called <code>/third-party/</code> folder in your project. In <code>.eleventy.js</code>, you import it as<pre class=language-js><code class=language-js><span class="token keyword">const</span> tm <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./third_party/markdown-it-texmath"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><pre class=language-html><code class=language-html><span class="token comment">&lt;!-- Add in &lt;head> --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span><br>  <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><br>  <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css<span class="token punctuation">"</span></span><br><span class="token punctuation">/></span></span><br><br><span class="token comment">&lt;!-- Save to local and modify (or just use) --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span><br>  <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><br>  <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css<span class="token punctuation">"</span></span><br><span class="token punctuation">/></span></span></code></pre><h2 id=figures tabindex=-1>Figures <a href=#figures class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><div class=col-2-equal><pre class=language-bash><code class=language-bash><span class="token comment"># Insert normally,</span><br><span class="token operator">!</span><span class="token punctuation">[</span>description<span class="token punctuation">]</span><span class="token punctuation">(</span>/path/to/image<span class="token punctuation">)</span><br><span class="token punctuation">{</span>% enraw %<span class="token punctuation">}</span></code></pre><pre class=language-bash><code class=language-bash><span class="token comment"># With custom classes</span><br><span class="token comment"># (using markdown-it-attrs)</span><br><span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>:.custom-class<span class="token punctuation">}</span></code></pre></div><h3 id=using-relative-path%3F tabindex=-1>Using relative path? <a href=#using-relative-path%3F class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>In sert images with the path relative to the directory of <code>.md</code> files. Let's use <a href=https://www.npmjs.com/package/eleventy-plugin-page-assets>eleventy-plugin-page-assets</a>.<pre class=language-bash><code class=language-bash><span class="token operator">|</span>- sample_posts/<br><span class="token operator">|</span> <span class="token operator">|</span>- post.md<br><span class="token operator">|</span> <span class="token operator">|</span>- img/<br><span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span>- figure1.png<br><span class="token operator">|</span> <span class="token operator">|</span>- figure2.png<br><span class="token operator">|</span>- src/</code></pre><p>In <code>.eleventy.js</code>,<pre class=language-js><code class=language-js><span class="token keyword">const</span> pageAssetsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eleventy-plugin-page-assets"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addPlugin</span><span class="token punctuation">(</span>pageAssetsPlugin<span class="token punctuation">,</span> <span class="token punctuation">{</span><br>    <span class="token property literal-property">mode</span><span class="token operator">:</span> <span class="token string">"parse"</span><span class="token punctuation">,</span><br>    <span class="token property literal-property">postsMatching</span><span class="token operator">:</span> <span class="token string">"sample_posts/*.md"</span><span class="token punctuation">,</span><br>    <span class="token property literal-property">recursive</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id=markdown tabindex=-1>Markdown <a href=#markdown class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><h3 id=markdown-it-%26-its-plugins tabindex=-1>markdown-it & its plugins <a href=#markdown-it-%26-its-plugins class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>We use <a href=https://github.com/markdown-it/markdown-it>markdown-it</a> and <a href="https://www.npmjs.com/search?q=keywords:markdown-it-plugin">its plugins</a>. Just use <code>npm i &lt;plugin-name> --save-dev</code> to install.<div class=hsbox><div class=hs__title>My choices of useful plugins</div><div class=hs__content><p>Search on <a href=https://www.npmjs.com/ >npm page</a> with the same name.<ul><li><code>markdown-it-anchor</code> (use with <code>eleventy-plugin-nesting-toc</code>) to create anchor links for headings.<li><code>markdown-it-attrs</code> to use something like <code>{:#heading-id}</code> (like in Jekyll).<li><code>markdown-it-emoji</code> to insert emoji with shortcodes.<li><code>markdown-it-container</code> to use something like <code>:::info</code> for blocks.<li><code>markdown-it-footnote</code><li><code>markdown-it-heading-wrapper</code> to wrap heading with containers.<li><code>markdown-it-kbd</code> to use <code>[[Ctrl]]</code> for keyboard-like style.<li><code>markdown-it-mark</code> to use <code>==Text==</code> for rendering to <code>&lt;mark>Text&lt;/mark></code>.<li><code>markdown-it-table-of-contents</code> for using <code>[[toc]]</code> anywhere we want.<li>My <a href=https://github.com/dinhanhthi/markdown-it-texmath>customized version</a> of <code>markdown-it-texmath</code>. <strong>Update</strong>: Check <a href=#math-equations>this section</a>.<li><code>@gerhobbelt/markdown-it-inline-text-color</code> for coloring inline text by using something like <code>{color:red}Text{color}</code>.</ul></div></div><div class=hsbox><div class=hs__title>How to use markdown-it's plugins in 11ty?</div><div class=hs__content><p>Below are an example of inserting 2 plugins,<pre class=language-js><code class=language-js><span class="token comment">// .eleventy.js</span><br><span class="token comment">// An example of using plugins</span><br><span class="token keyword">const</span> markdownIt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"markdown-it"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">var</span> markdownItp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"markdown-it"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">let</span> markdownLibrary <span class="token operator">=</span> <span class="token function">markdownIt</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    <span class="token property literal-property">html</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// html tag inside source</span><br>    <span class="token property literal-property">breaks</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// use '\n' as &lt;br></span><br>    <span class="token property literal-property">linkify</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Autoconvert URL-like text to links</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"markdown-it-emoji"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// emoji</span><br>    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"markdown-it-table-of-contents"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [[toc]] (no spaces)</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">setLibrary</span><span class="token punctuation">(</span><span class="token string">"md"</span><span class="token punctuation">,</span> markdownLibrary<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div></div><h3 id=custom-container tabindex=-1>Custom container <a href=#custom-container class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>If you wanna create an <strong>advanced custom container</strong>, use plugin <code>markdown-it-container</code>. For example, you want export something like,<pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hsbox<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hs__title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token comment">&lt;!-- Custom Title --></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hs__content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token comment">&lt;!-- Custom markdown texts --></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>Just by using,<pre class=language-html><code class=language-html>::: hsbox Custom Title Custom markdown texts ::: </code></pre><p>You can put in <code>.eleventy.js</code> like,<pre class=language-js><code class=language-js><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'markdown-it-container'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'hsbox'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br>  <span class="token function function-variable">validate</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> params<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">^hsbox\s+(.*)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token function function-variable">render</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">tokens<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> m <span class="token operator">=</span> tokens<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">.</span>info<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">^hsbox\s+(.*)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">.</span>nesting <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token comment">// opening tag</span><br>      <span class="token keyword">return</span> <span class="token string">'&lt;div class="hsbox">&lt;div class="hs__title">'</span><br>        <span class="token operator">+</span> markdownItp<span class="token punctuation">.</span><span class="token function">renderInline</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>        <span class="token operator">+</span> <span class="token string">'&lt;/div>&lt;div class="hs__content">'</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>      <span class="token comment">// closing tag</span><br>      <span class="token keyword">return</span> <span class="token string">'&lt;/div>&lt;/div>'</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h3 id=markdown-inside-.njk tabindex=-1>Markdown inside <code>.njk</code> <a href=#markdown-inside-.njk class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><div class=col-2-equal><pre class=language-js><code class=language-js><span class="token comment">// .eleventy.js</span><br><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addPairedShortcode</span><span class="token punctuation">(</span><span class="token string">"markdown"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> inline <span class="token operator">=</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> inline<br>      <span class="token operator">?</span> markdownLibrary<span class="token punctuation">.</span><span class="token function">renderInline</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><br>      <span class="token operator">:</span> markdownLibrary<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre class=language-html><code class=language-html>{% markdown %}<br><span class="token comment">&lt;!-- html tags --></span><br><span class="token comment">&lt;!-- no need spaces before/after --></span><br>{% endmarkdown %} </code></pre></div><h3 id=html%2Fnunjucks-tags-inside-.md tabindex=-1>HTML/nunjucks tags inside <code>.md</code> <a href=#html%2Fnunjucks-tags-inside-.md class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><div class=col-2-equal><pre class=language-html><code class=language-html><span class="token comment">&lt;!-- not working --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>__abc__<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><span class="token comment">&lt;!-- not working --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br>__abc__<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><pre class=language-html><code class=language-html><span class="token comment">&lt;!-- working --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br><br>__abc__<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><pre class=language-html><code class=language-html><span class="token comment">&lt;!-- not working --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-of<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  {% for item in cv.education.list %}<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>where<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ item.where }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ item.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>date<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ item.date }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  {% endfor %}<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br></code></pre><pre class=language-html><code class=language-html><span class="token comment">&lt;!-- working --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-of<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><br>{% for item in cv.education.list %}<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>where<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ item.where }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ item.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>date<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ item.date }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>{% endfor %}<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br></code></pre></div><h3 id=custom-block-shortcodes tabindex=-1>Custom block shortcodes <a href=#custom-block-shortcodes class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><div class=col-2-equal><div><p>To creata the same code block like above, i.e.,<pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hsbox<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hs__title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token comment">&lt;!-- Custom Title --></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hs__content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token comment">&lt;!-- Custom markdown texts --></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre></div><div><p>Just by using,<pre class=language-html><code class=language-html>{% hsbox "Custom Title" %}<br><span class="token comment">&lt;!-- Custom markdown texts --></span><br>{% endhsbox %} </code></pre></div></div><pre class=language-js><code class=language-js><span class="token comment">// .eleventy.js</span><br><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addPairedShortcode</span><span class="token punctuation">(</span><span class="token string">"hsbox"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> title</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>      <span class="token string">'&lt;div class="hsbox">&lt;div class="hs__title">'</span> <span class="token operator">+</span><br>      markdownLibrary<span class="token punctuation">.</span><span class="token function">renderInline</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span> <span class="token operator">+</span><br>      <span class="token string">'&lt;/div>&lt;div class="hs__content">'</span> <span class="token operator">+</span><br>      markdownLibrary<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token operator">+</span><br>      <span class="token string">"&lt;/div>&lt;/div>"</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id=custom-inline-shortcodes tabindex=-1>Custom inline shortcodes <a href=#custom-inline-shortcodes class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>If you wanna export something like,<pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-url<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ref<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code></pre><p>by using <code>{% ref "custom-url" %}</code> (<code>""</code> is required). You can set,<pre class=language-js><code class=language-js><span class="token comment">// .eleventy.js</span><br><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addShortcode</span><span class="token punctuation">(</span><span class="token string">"ref"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>      <span class="token string">'&lt;sup>&lt;a href="'</span> <span class="token operator">+</span><br>      url <span class="token operator">+</span><br>      <span class="token string">'" rel="noopener noreferrer" target="_blank">[ref]&lt;/a>&lt;/sup>'</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id=search tabindex=-1>Search <a href=#search class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><p>For me, the best choice for search feature in 11ty is using <a href=http://elasticlunr.com/ >Elasticlunr</a> with some customizations.<div class=hsbox><div class=hs__title>Why not others?</div><div class=hs__content><p>Based on the purpose of <strong>free</strong>, <strong>quick</strong>, <strong>full text</strong> search:<ul><li>We don't choose Google's <a href=https://programmablesearchengine.google.com/ >Programmable Search</a> because: it contains ads, not index as we want, difficult to customize with personal theme,...<li>We don't choose paid options like <a href=https://www.algolia.com/ >Agolia</a> because the free option contains very few units. It's absolutely not enough for your need. In case you still want to use it with less consumption, read <a href=https://www.kizu.ru/algolia-search/ >this article</a>.</ul></div></div><p>Because your site becomes bigger in future, you cannot index the whole text of your site (every time you build). <strong>My idea</strong> is to create a custom frontmatter tag called "keywords" which contains all of the important keywords used to determine the content of your posts. Of course, the cons is that you have to put the keywords manually!!<p>Check <a href=https://github.com/dinhanhthi/eleventy-search-demo>this repository</a>, I've pulled and modified from <a href=https://github.com/duncanmcdougall/eleventy-search-demo>this one</a> (The author takes so long to check my pull request ^^). My customization supports:<ul><li>Index your customizable keywords.<li>Fix UX bugs in the main repo.<li>Highlight found keywords in the search result.<li>Limit the max number of texts in the result (show around the found keywords).<li>Adapt to the newest version of 11ty.</ul><h2 id=data-files tabindex=-1>Data files <a href=#data-files class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><h3 id=apply-data-for-all-posts-in-a-directory tabindex=-1>Apply data for all posts in a directory <a href=#apply-data-for-all-posts-in-a-directory class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>ðŸ‘‰ Check more in <a href=https://www.11ty.dev/docs/data-template-dir/ >official doc</a>.<p>For example, we wanna add tag "posts" for all posts in a folder named "sample_posts". Inside <code>/sample_posts/</code>, create a file <code>sample_posts.son</code> (yes, the same name as "sample_posts") with following content,<pre class=language-json><code class=language-json><span class="token punctuation">{</span><br>  <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"posts"</span><span class="token punctuation">]</span><br><span class="token punctuation">}</span></code></pre><h3 id=using-external-data-files-with-environment-env tabindex=-1>Using external data files with environment <code>env</code> <a href=#using-external-data-files-with-environment-env class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>Suppose your data files is not in <code>./_data/</code> but in <code>./notes/_data/</code>.<pre class=language-js><code class=language-js><span class="token comment">// .eleventy.js</span><br><span class="token keyword">const</span> dataDir <span class="token operator">=</span> <span class="token string">"notes/_data"</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token punctuation">{</span><br>    <span class="token property literal-property">dir</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property literal-property">data</span><span class="token operator">:</span> dataDir<span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>In case you have a setting file in <code>notes/_data/settings.json</code>. Sometimes, you use it as a data files via <code>dataDir</code> (just <code>settings.*</code>), sometimes, you use it as a separated <code>json</code> file. For example, you use it in a separated js file <code>toggle-notes.js</code>,<pre class=language-js><code class=language-js><span class="token comment">// You CAN'T use below</span><br><span class="token keyword">import</span> settings <span class="token keyword">from</span> <span class="token string">"../../../notes/_data/settings.json"</span><span class="token punctuation">;</span><br><span class="token comment">// â— There will be an error</span><br><span class="token comment">// Cannot use import statement outside a module</span></code></pre><p><strong>Solution</strong>, in <code>.eleventy.js</code>,<pre class=language-js><code class=language-js><span class="token keyword">const</span> settings <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./"</span> <span class="token operator">+</span> dataDir <span class="token operator">+</span> <span class="token string">"/settings.json"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><br>  <span class="token property literal-property">environment</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ELEVENTY_ENV</span><span class="token punctuation">,</span> <span class="token comment">// the same place with this</span><br>  <span class="token property literal-property">settings</span><span class="token operator">:</span> settings<span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Then in <code>toggle-notes.js</code>,<pre class=language-js><code class=language-js>env<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>someThing<span class="token punctuation">;</span></code></pre><h3 id=local-data-files tabindex=-1>Local data files <a href=#local-data-files class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><pre class=language-js><code class=language-js><span class="token comment">// .eleventy.js</span><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token punctuation">{</span><br>    <span class="token property literal-property">dir</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property literal-property">input</span><span class="token operator">:</span> <span class="token string">"."</span><span class="token punctuation">,</span><br>      <span class="token property literal-property">includes</span><span class="token operator">:</span> <span class="token string">"_includes"</span><span class="token punctuation">,</span><br>      <span class="token property literal-property">data</span><span class="token operator">:</span> <span class="token string">"_data"</span><span class="token punctuation">,</span><br>      <span class="token property literal-property">output</span><span class="token operator">:</span> <span class="token string">"_site"</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>You put all your data files (<code>.js</code> or <code>.json</code>) in <code>_data</code>, e.g.,<div class=col-2-equal><pre class=language-json><code class=language-json><span class="token comment">// _data/dataUrls.json</span><br><span class="token punctuation">[</span><br>  <span class="token punctuation">{</span><br>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"abc"</span><span class="token punctuation">,</span><br>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"http://abc.com"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span><br>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"xyz"</span><span class="token punctuation">,</span><br>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"http://xyz.com"</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">]</span></code></pre><pre class=language-html><code class=language-html><span class="token comment">&lt;!-- in a .njk file --></span><br>{% for item in dataUrls %} {{ item.name }} {{ item.url }} {% endfor %} </code></pre></div><div class=col-2-equal><pre class=language-json><code class=language-json><span class="token comment">// _data/cat_icon.json</span><br><span class="token punctuation">{</span><br>  <span class="token property">"Project-based Learning"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"svg"</span><span class="token operator">:</span> <span class="token string">"/img/cats/project.svg"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"MOOC"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"svg"</span><span class="token operator">:</span> <span class="token string">"/img/cats/mooc.svg"</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><pre class=language-js><code class=language-js><span class="token comment">// .eleventy.js</span><br><span class="token keyword">const</span> catIcon <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./_data/cat_icon.json"</span><span class="token punctuation">)</span><br><span class="token comment">// usage</span><br>catIcon<span class="token punctuation">[</span>page<span class="token punctuation">.</span>data<span class="token punctuation">.</span>tags<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>svg<span class="token punctuation">,</span><br><br><span class="token comment">// .njk</span><br>catIcon<span class="token punctuation">[</span>page<span class="token punctuation">.</span>data<span class="token punctuation">.</span>tags<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>svg<span class="token punctuation">,</span></code></pre></div><p>For example, export a <strong>current year</strong> on site,<div class=col-2-equal><pre class=language-js><code class=language-js><span class="token comment">// _data/helpers.js</span><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><br>  <span class="token function">currentYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> today <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> today<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre class=language-html><code class=language-html><span class="token comment">&lt;!-- in a .njk file --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>{{ helpers.currentYear() }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br></code></pre></div><h3 id=fetched-json-from-an-external-source tabindex=-1>Fetched JSON from an external source <a href=#fetched-json-from-an-external-source class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>For example, <a href=/good-github-repositories/ >this post</a> displays a list of starred github repositories (by me) which is fetched from <code>https://api.github.com/users/dinhanhthi/starred</code>.<pre class=language-js><code class=language-js><span class="token comment">// in .eleventy.js</span><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addShortcode</span><span class="token punctuation">(</span><span class="token string">"list_repos"</span><span class="token punctuation">,</span> getLiList<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getRepoData</span><span class="token punctuation">(</span><span class="token parameter">_url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>_url<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getLiList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">function</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> b<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>      <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token comment">// escape HTML tags</span><br>    <span class="token keyword">function</span> <span class="token function">htmlEntities</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">&</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">"&ampamp;"</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">&lt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">"&amplt;"</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">></span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">"&ampgt;"</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">"</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">"&ampquot;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">var</span> repos <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getRepoData</span><span class="token punctuation">(</span><br>      <span class="token string">"https://api.github.com/users/dinhanhthi/starred?page=1&per_page=10000"</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    data<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>compare<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      repos <span class="token operator">+=</span><br>        <span class="token string">"&lt;li>"</span> <span class="token operator">+</span><br>        <span class="token string">'&lt;a href="'</span> <span class="token operator">+</span><br>        obj<span class="token punctuation">.</span>html_url <span class="token operator">+</span><br>        <span class="token string">'" target="_blank">'</span> <span class="token operator">+</span><br>        obj<span class="token punctuation">.</span>name <span class="token operator">+</span><br>        <span class="token string">"&lt;/a>"</span> <span class="token operator">+</span><br>        <span class="token string">" by &lt;i>"</span> <span class="token operator">+</span><br>        obj<span class="token punctuation">.</span>owner<span class="token punctuation">.</span>login <span class="token operator">+</span><br>        <span class="token string">"&lt;/i> â€” "</span> <span class="token operator">+</span><br>        <span class="token function">htmlEntities</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>description<span class="token punctuation">)</span> <span class="token operator">+</span><br>        <span class="token string">"&lt;/li>"</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token string">"&lt;ol>"</span> <span class="token operator">+</span> repos <span class="token operator">+</span> <span class="token string">"&lt;/ol>"</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre class=language-js><code class=language-js><span class="token comment">// in post</span><br><span class="token punctuation">{</span><span class="token operator">%</span> list_repos <span class="token operator">%</span><span class="token punctuation">}</span><br></code></pre><h2 id=working-style tabindex=-1>Working style <a href=#working-style class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><h3 id=custom-environment tabindex=-1>Custom environment <a href=#custom-environment class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>More info, read <a href=https://www.11ty.dev/docs/data-js/#example-exposing-environment-variables>official doc</a>. For example, we only perform something differently on local.<pre class=language-json><code class=language-json><span class="token punctuation">{</span><br>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"local-build"</span><span class="token operator">:</span> <span class="token string">"ELEVENTY_ENV=local eleventy"</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>An example of using in <code>.eleventy.js</code>,<pre class=language-js><code class=language-js><span class="token comment">// .eleventy.js</span><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ELEVENTY_ENV</span> <span class="token operator">==</span> <span class="token string">"local"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// do something locally</span><br>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    <span class="token comment">// do something on server</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Or using in the template,<div class=col-2-equal><pre class=language-js><code class=language-js><span class="token comment">// _data/myProject.js</span><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><br>  <span class="token property literal-property">environment</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ELEVENTY_ENV</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre class=language-js><code class=language-js><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> myProject<span class="token punctuation">.</span>environment <span class="token operator">==</span> <span class="token string">"local"</span> <span class="token operator">%</span><span class="token punctuation">}</span><br>  <span class="token operator">&lt;</span>style<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> css <span class="token operator">|</span> cssmin <span class="token operator">|</span> safe <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span><br><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">else</span> <span class="token operator">%</span><span class="token punctuation">}</span><br>  <span class="token operator">&lt;</span>style<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> css <span class="token operator">|</span> safe <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span><br><span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span><br></code></pre></div><h3 id=incremental tabindex=-1>Incremental <a href=#incremental class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>ðŸŽ‰ <strong>Update 19 Nov 2021</strong>: 11ty has already added the incremental option (<code>--incremental</code>). Check more in <a href=https://www.11ty.dev/docs/usage/incremental/ >the official document</a>.<div class=hsbox><div class=hs__title>Older solution</div><div class=hs__content><p>ðŸ‘Ž <strong>Weakness of 11ty</strong>:<p class=indent><ol><li>There is some change in files, 11ty rebuilds the whole site. It's painful if we work with markdown files and save them regularly!<li>Cannot access the site while the building processing.</ol><p>ðŸ’¡ <strong>Idea</strong>:<p class=indent><ol><li>Build manually, e.g. <code>npm run build-local</code> to <code>_site</code> folder.<li>Copy all files in <code>_site</code> to a so-called folder <code>_live</code><li>Run a custom server on folder <code>_site</code> (install <code>npm i http-server -g</code> first)</ol><p>An example of scripts,<pre class=language-json><code class=language-json><span class="token punctuation">{</span><br>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"local-build"</span><span class="token operator">:</span> <span class="token string">"ELEVENTY_ENV=local eleventy && mkdir -p _live && cp -Rf _site/* _live/"</span><span class="token punctuation">,</span><br>    <span class="token property">"local-serve"</span><span class="token operator">:</span> <span class="token string">"mkdir -p _live && cp -Rf _site/* _live/ && http-server _live"</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre></div></div><h3 id=working-with-themes-locally%3F tabindex=-1>Working with themes locally? <a href=#working-with-themes-locally%3F class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>From version 1.0.0 (currently, I use version <code>1.0.0-canary.38</code>), we can customize <code>eleventyConfig.ignores</code> right in <code>.eleventy.js</code>. Use this to make different <code>posts</code> folders for local and for remote. Because there are too many posts which are going to be built, it takes a very long time to see the changes. <strong>If you just wanna make changes in theme, you need a separated folder (having less number of posts)</strong>.<p>For example,<ul><li>Only process posts in <code>notes/*</code> on remote (ignore <code>sample_posts/*</code>).<li>Only process posts in <code>sample_posts/*</code> on local (ignore <code>notes/*</code>).</ul><pre class=language-js><code class=language-js><span class="token comment">// .eleventy.js</span><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ELEVENTY_ENV</span> <span class="token operator">==</span> <span class="token string">"local"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    eleventyConfig<span class="token punctuation">.</span>ignores<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"notes"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ignore folder notes</span><br>    eleventyConfig<span class="token punctuation">.</span>ignores<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">"sample_posts"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// use folder sample_posts</span><br>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    eleventyConfig<span class="token punctuation">.</span>ignores<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">"notes"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// use folder notes</span><br>    eleventyConfig<span class="token punctuation">.</span>ignores<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"sample_posts"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ignore folder sample_posts</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre class=language-bash><code class=language-bash><span class="token comment"># package.json</span><br><span class="token punctuation">{</span><br>  <span class="token string">"scripts"</span><span class="token class-name builtin">:</span> <span class="token punctuation">{</span><br>    <span class="token string">"local:build"</span><span class="token class-name builtin">:</span> <span class="token string">"ELEVENTY_ENV=local eleventy"</span>,<br>    <span class="token string">"remote:build"</span><span class="token class-name builtin">:</span> <span class="token string">"eleventy"</span>,<br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h2 id=nunjucks-things tabindex=-1>Nunjucks things <a href=#nunjucks-things class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><p>Add a new item to a list,<pre class=language-js><code class=language-js><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">set</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">%</span><span class="token punctuation">}</span><br><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">set</span> a <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span> <span class="token operator">%</span><span class="token punctuation">}</span><br></code></pre><p>Create a dictionary with nunjucks<pre class=language-js><code class=language-js><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">set</span> items <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token property string-property">'a'</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token property string-property">'b'</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span> <span class="token operator">%</span><span class="token punctuation">}</span><br></code></pre><p>Add a new key-value to a dictionary,<pre class=language-js><code class=language-js><span class="token comment">// .eleventy.js -> create a new filter</span><br>eleventyConfig<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">'setAttribute'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">dictionary<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	dictionary<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span><br>	<span class="token keyword">return</span> dictionary<span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// usage</span><br><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">set</span> myDict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token property string-property">"key1"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property string-property">"key2"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property string-property">"key3"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token operator">%</span><span class="token punctuation">}</span><br><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">set</span> myDict <span class="token operator">=</span> myDict<span class="token operator">|</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'key2'</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token punctuation">}</span><br><span class="token punctuation">{</span><span class="token punctuation">{</span>myDict<span class="token punctuation">[</span><span class="token string">'key2'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token comment">// pring "123" as expected</span><br></code></pre><p>String concatenations,<pre class=language-html><code class=language-html>{# Not working #} {% set url = "/bits/{{ data.slug }}" %} {# Working #} {% set<br>url = ["/bits/", data.slug] | join %} </code></pre><h2 id=errors tabindex=-1>Errors <a href=#errors class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><pre class=language-bash><code class=language-bash><span class="token comment"># TypeError: Cannot read property 'type' of undefined</span><br><span class="token comment"># => Class comes before ![]() of an image!</span></code></pre><pre class=language-bash><code class=language-bash><span class="token comment"># EISDIR: illegal operation on a directory</span><br><span class="token comment"># Solution:</span><br><span class="token comment"># Delete _site/ and rebuild!</span></code></pre><pre class=language-bash><code class=language-bash><span class="token comment"># ENOTDIR: not a directory...</span><br><span class="token comment"># Solution:</span><br><span class="token comment"># Delete _site/ and rebuild!</span></code></pre><pre class=language-bash><code class=language-bash><span class="token comment"># Invalid DateTime</span><br><span class="token comment"># Just for new posts => try to commit (on branch "dev") before building!</span></code></pre><h2 id=references tabindex=-1>References <a href=#references class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><p class=indent><ol><li><a href=https://www.11ty.dev/ >Official website.</a><li><a href=https://mozilla.github.io/nunjucks/templating.html>Nunjucks Documentation</a><li><a href=https://www.mattnortham.com/blog/2020/moving-from-wordpress-to-eleventy/ >Moving from WordPress to Eleventy</a><li><a href=https://www.webstoemp.com/blog/from-jekyll-to-eleventy/ >From Jekyll to Eleventy - Webstoemp</a><li><a href=https://bryanlrobinson.com/blog/creating-11ty-plugin-embed-svg-contents/ >Creating an 11ty Plugin - SVG Embed Tool - bryanlrobinson.com</a></ol></div><script type=application/ld+json>{
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": "11ty + Nunjucks",
        "image": [],
        "author": "Anh-Thi DINH",
        "url": "https://dinhanhthi.com/11ty-nunjucks/",
        "mainEntityOfPage": "https://dinhanhthi.com/11ty-nunjucks/",
        "datePublished": "19-11-2021",
        "dateModified": "2021-11-19",
        "description": "This is not a tutorial to create an 11ty website, this&#39;s a note! You can find some very new and useful techniques on this note alongside the..."
      }</script></article></main><footer><a href=/ target=_blank>Thi Â Â©Â  2022 </a>Â â€¢Â  <a href=/about-the-notes/ >About this site </a>Â â€¢Â  <a href=https://photos.app.goo.gl/9OVEkdTjmtRPg7vC3 target=_blank>My sketches </a>Â â€¢Â  <a href=https://goo.gl/photos/yQXdQws1LLS16x5v5 target=_blank>I cook </a>Â â€¢Â  <a href=/support-thi/ ><img alt="Support Thi" class=keep-original src=/img_src/icons/coffee.svg height=16 width=auto> Support Thi</a></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.6/elasticlunr.min.js></script><script src=/src/js/components/clipboard.min.js></script><script src="/src/js/main.min.js?hash=d3b51a19b7" async defer></script><a href=/support-thi/ class="floating-button tooltip" id=buy-me-a-coffee><img alt="Support Thi" class=keep-original src=/img_src/icons/coffee.svg> <span class=tooltiptext>Support Thi</span> </a><button class="floating-button tooltip" id=scroll-top-btn><img alt="Scroll to top" class=keep-original src=/img_src/to-top.webp> <span class=tooltiptext>Top</span></button>