<!doctype html><html domain=.com lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="" http-equiv=Content-Security-Policy><link href=/favicon.svg rel=icon type=image/svg+xml><meta content=#f9c412 name=theme-color><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name=robots><title>MOOC: Angular 2 - Services & DI & Routing | Note of Thi</title><meta content="MOOC: Angular 2 - Services & DI & Routing | Note of Thi" prefix=og:http://ogp.me/ns# property=og:title><meta content="This is my note for the course &amp;quot;Angular - The Complete Guide (2021 Edition)&amp;quot; which is taught by Maximilian Schwarzmüller on Udemy...." name=description><meta content="This is my note for the course &amp;quot;Angular - The Complete Guide (2021 Edition)&amp;quot; which is taught by Maximilian Schwarzmüller on Udemy...." prefix=og:http://ogp.me/ns# property=og:description><meta content=summary_large_image name=twitter:card><meta content=@dinhanhthi name=twitter:site><meta content=@dinhanhthi name=twitter:creator><meta content=https://dinhanhthi.com/img_src/cover.png prefix=og:http://ogp.me/ns# property=og:image><meta content=article prefix=og:http://ogp.me/ns# property=og:type><link href=https://dinhanhthi.com/angular-2-service-dependency-injection-routing/ rel=canonical><meta content=https://dinhanhthi.com/angular-2-service-dependency-injection-routing/ prefix=og:http://ogp.me/ns# property=og:url><meta content=no-referrer-when-downgrade name=referrer><link href=/feed/feed.xml rel=alternate type=application/atom+xml title="🔥 Anh-Thi DINH"><link href=/ rel=preconnect crossorigin><style>body {
      visibility: hidden;
      opacity: 0;
    }</style><noscript><style>body {
        visibility: visible;
        opacity: 1;
      }</style></noscript><script csp-hash>if (/Mac OS X/.test(navigator.userAgent))
      document
        .documentElement
        .classList
        .add('apple')</script><link href=/src/css/main.css rel=stylesheet type=text/css><style>@font-face{font-display:swap;font-family:'fontello';src:url(/fontello/font/fontello.eot?46432155);src:url(/fontello/font/fontello.eot?46432155#iefix) format('embedded-opentype'),url(/fontello/font/fontello.woff2?46432155) format('woff2'),url(/fontello/font/fontello.woff?46432155) format('woff'),url(/fontello/font/fontello.ttf?46432155) format('truetype'),url(/fontello/font/fontello.svg?46432155#fontello) format('svg');font-weight:400;font-style:normal}[class*=" icon-"]:before,[class^=icon-]:before{font-family:"fontello";font-style:normal;font-weight:400;speak:never;display:inline-block;text-decoration:inherit;width:1em;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-doc:before{content:'\e800'}.icon-doc-add:before{content:'\e801'}.icon-stats:before{content:'\e802'}.icon-tags:before{content:'\e803'}.icon-like:before{content:'\e804'}.icon-cog-alt:before{content:'\e805'}.icon-project:before{content:'\e806'}.icon-mooc:before{content:'\e807'}.icon-dl:before{content:'\e808'}.icon-ml:before{content:'\e809'}.icon-python:before{content:'\e80a'}.icon-nlp:before{content:'\e80b'}.icon-r-lang:before{content:'\e80c'}.icon-skill:before{content:'\e80d'}.icon-js-solid:before{content:'\e80e'}.icon-game:before{content:'\e80f'}.icon-web:before{content:'\e810'}.icon-algo:before{content:'\e811'}.icon-mooc-solid:before{content:'\e812'}.icon-chatbot:before{content:'\e813'}.icon-web-dev:before{content:'\e814'}.icon-data:before{content:'\e815'}.icon-skill-solid:before{content:'\e816'}.icon-python-solid:before{content:'\e817'}.icon-project-solid:before{content:'\e818'}.icon-js:before{content:'\e819'}.icon-rocket:before{content:'\e81a'}.icon-ml-solid:before{content:'\e81b'}.icon-game-solid:before{content:'\e81c'}.icon-dl-solid:before{content:'\e81d'}.icon-nlp-solid:before{content:'\e81e'}.icon-web-solid:before{content:'\e81f'}.icon-algo-solid:before{content:'\e820'}.icon-puzzle-outline:before{content:'\e821'}.icon-ng:before{content:'\e822'}.icon-ok:before{content:'\e823'}.icon-link:before{content:'\e824'}.icon-down-circle:before{content:'\e826'}.icon-api:before{content:'\e828'}.icon-right-circle:before{content:'\e829'}.icon-down-open:before{content:'\e82a'}.icon-right-open:before{content:'\e82b'}.icon-copy:before{content:'\f0c5'}.icon-gamepad:before{content:'\f11b'}.icon-fork:before{content:'\f126'}.icon-mlops-solid:before{content:'\f135'}.icon-edu-solid:before{content:'\f19d'}.icon-others-solid:before{content:'\f1b3'}.icon-ds-solid:before{content:'\f1c0'}.icon-chart-area:before{content:'\f1fe'}.icon-chart-pie:before{content:'\f200'}.icon-ts:before{content:'\f201'}.icon-clone:before{content:'\f24d'}</style><body><script>function showTheme() {
        const btn = document.getElementById("toggle-dark-light");
        let toggleIcon = btn.firstElementChild;
        const currentTheme = localStorage.getItem("theme");
        if (currentTheme === "dark") {
          document
            .body
            .classList
            .toggle("dark-theme");
          toggleIcon.src = "/img_src/nav/sun.svg";
        } else if (currentTheme === "light") {
          document
            .body
            .classList
            .toggle("light-theme");
          toggleIcon.src = "/img_src/nav/moon.svg";
        }
      }
      function showContent() {
        document.body.style.visibility = 'visible';
        document.body.style.opacity = 1;
      }
      window.addEventListener('DOMContentLoaded', (event) => {
        showTheme();
        showContent();
      });</script><header class="wave-border wave-border-post"><nav><div id=nav><a href=/ class="nav-item no-effect"><img alt=home src=/img_src/nav/home.svg class=keep-original height=18 width=18> <span>Thi</span> </a><a href=/about/ class="nav-item no-effect"><img alt=about src=/img_src/nav/about.svg class=keep-original height=15 width=15> <span>About</span></a><div class=nav-search id=nav-search><form><input aria-label='search notes (press "/" to focus & "ESC" to lose)' autocomplete=off class=nav-search__input id=nav-search__input onfocusin=inFocus(this) placeholder='search notes (press "/" to focus & "ESC" to lose)' type=search></form><div id=nav-search__result-container style="display: none;"><ul id=nav-search__ul></ul><div id=nav-search__no-result style="display: none;"><p>No results found.</div></div></div><span class="nav-item no-effect nav-dark-light" href="" id=toggle-dark-light><img alt=light-mode src=/img_src/nav/moon.svg class=keep-original height=20 width=20> </span><a href=https://github.com/dinhanhthi class="nav-item no-effect nav-github" target=_blank><img alt=github src=/img_src/nav/github.svg class=keep-original height=20 width=20></a></div><div class=reading-progress-container><div id=reading-progress aria-hidden=true></div></div></nav><script>var divNavSearch=document.getElementById("nav-search"),divRes=document.getElementById("nav-search__result-container"),ulRes=document.getElementById("nav-search__ul");function inFocus(e){""!=e.value&&(divRes.style.display="block")}var isOnDiv=!1;divRes.addEventListener("mouseover",(function(){isOnDiv=!0})),divRes.addEventListener("mouseout",(function(){isOnDiv=!1}));var inputSearch=document.getElementById("nav-search__input");window.addEventListener("click",(function(){ulRes.getElementsByTagName("li").length>=1&&isOnDiv||(divRes.style.display="none")})),inputSearch.addEventListener("click",(e=>{e.stopPropagation()}));const addSelected=e=>{ulRes.querySelectorAll("li").forEach((e=>{e.classList.remove("selected")})),e.classList.add("selected")};var isInView=(e,t)=>{var n=e.offsetTop+e.offsetHeight-t.scrollTop>t.offsetHeight;return e.offsetTop<t.scrollTop?"above":n?"below":"in"};const updateScroll=(e,t)=>{e.offsetTop+e.offsetHeight-t.scrollTop>t.offsetHeight&&(t.scrollTop=e.offsetTop+e.offsetHeight-t.offsetHeight),e.offsetTop<t.scrollTop&&(t.scrollTop=e.offsetTop)};document.onkeydown=e=>{checkInInput=document.activeElement==inputSearch,"/"!==e.key||checkInInput||(e.stopPropagation(),e.preventDefault(),inputSearch.focus())},document.addEventListener("focusin",(e=>{divNavSearch.contains(e.target)||(divRes.style.display="none")})),inputSearch.onkeydown=e=>{if("Enter"===e.key){e.stopPropagation(),e.preventDefault();var t=ulRes.querySelector('li[class*="selected"]');window.location.href=t.getElementsByClassName("item__content")[0].firstChild.firstChild.href}"Escape"===e.key&&(divRes.style.display="none",inputSearch.blur())},divNavSearch.onkeydown=e=>{if(hasResult=ulRes.getElementsByTagName("li").length>=1,hasResult){["ArrowUp","ArrowDown"].indexOf(e.key)>-1&&e.preventDefault();var t=ulRes.firstChild,n=ulRes.lastChild,s=ulRes.querySelector('li[class*="selected"]');switch(e.key){case"ArrowUp":nextLi=s&&s!=t?s.previousSibling:n,addSelected(nextLi),s=nextLi,updateScroll(s,divRes);break;case"ArrowDown":nextLi=s&&s!=n?s.nextSibling:t,addSelected(nextLi),s=nextLi,updateScroll(s,divRes)}}};</script><div class=header-container><div class="header-logo post-layout"><img alt="MOOC: Angular 2 - Services & DI & Routing" src=/img/header/angular.svg class=keep-original height=55 width=55></div><h1>MOOC: Angular 2 - Services & DI & Routing</h1><div id=more-info><div id=note-tag><a href=/tags/mooc/ id=category }>MOOC</a> <a href=/tags/angular/ id=category }>Angular</a></div><div id=last-modified>Last modified 1 years ago / <a href=https://github.com/dinhanhthi/notes/edit/master/./posts/mooc/2021-03-04-angular-2-service-dependency-injection-routing.md>Edit on Github</a></div></div></div></header><main class="" id=main-wrapper><article class=post-container><div class="container mt-2 normal page-note"><div class="danger not-full-warning"><div class=warning-icon><img alt=Warning src=/img_src/icons/time.svg class=keep-original></div><div>This post was <strong>updated more than 1 year ago</strong>, some information may be outdated!</div></div><div class="toc toc-common toc-js"><div class=ol-container><div class=toc-heading>In this note</div><ol><li><a href=#tips>TIPS</a><li><a href=#services-%26-dependency-injection>Services & Dependency Injection</a><ol><li><a href=#service%3F>Service?</a><li><a href=#di-%26-logging-service>DI & Logging service</a><li><a href=#data-service>Data Service</a><li><a href=#hierarchical-injector>Hierarchical injector</a><li><a href=#inject-services-into-services>Inject Services into Services</a><li><a href=#services-with-cross-components>Services with cross-components</a><li><a href=#service---pushing-data-from-a-b>Service - pushing data from A-B</a></ol><li><a href=#routing-%E2%86%92-change-pages>Routing → change pages</a><ol><li><a href=#adding-routes>Adding Routes</a><li><a href=#routerlink>routerLink</a><li><a href=#understand-paths>Understand paths</a><li><a href=#routerlinkactive>routerLinkActive</a><li><a href=#navigating-programmatically>Navigating programmatically</a><li><a href=#add-params-to-route>Add params to Route</a><li><a href=#query-params-(%3F...)>Query params (?...)</a><li><a href=#nested-%2F-child-router>Nested / Child router</a><li><a href=#preserve-query-params-between-paths>Preserve query params between paths</a><li><a href=#redirect-%26-wildcat-routes>Redirect & wildcat routes</a><li><a href=#app-routing.module.ts>app-routing.module.ts</a><li><a href=#login-%26-guards-%26-authentication>Login & Guards & Authentication</a><li><a href=#parsing-static-data-to-route>Parsing static data to route</a><li><a href=#parsing-dynamic-data-(server)-to-route>Parsing dynamic data (server) to route</a><li><a href=#location-strategies>Location strategies</a></ol></ol></div></div><p>This is my note for the course "<a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/13914134#overview>Angular - The Complete Guide (2021 Edition)</a>" which is taught by Maximilian Schwarzmüller on Udemy. This is an incredible course for you to start to learn Angular from basic. The official Angular docs is good but it's not for the beginner.<p>🍄 <strong>PART 1</strong> — <a href=/angular-1-basics-components-databinding-directives/ >Angular 1 - Basics & Components & Databinding & Directives</a><br>🍄 <strong>PART 2</strong> — <a href=/angular-2-service-dependency-injection-routing/ >Angular 2 - Services & Dependency Injection & Routing</a><br>🍄 <strong>PART 3</strong> — <a href=/angular-3-observable/ >Angular 3 - Observable</a><br>🍄 <strong>PART 4</strong> — <a href=/angular-4-forms/ >Angular 4 - Forms</a><br>👉 <a href=https://github.com/dinhanhthi/learn-angular-complete-guide>Github repo</a><br>👉 <strong>Other note</strong> (taken before this course): <a href=https://www.notion.so/Angular-101-fcbd5683f8e941f89c709595792b62d2>Angular 101</a><div class=warning><p>This note contains only the important things which can be look back later, it cannot replace either <a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/13914134#overview>the course</a> nor <a href=https://angular.io/start>the official document</a>!</div><h2 id=tips tabindex=-1>TIPS <a href=#tips class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><p>Get a copy, not access directly,<pre class=language-jsx><code class=language-jsx><span class="token comment">// for example</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token punctuation">{</span><br>	<span class="token keyword">private</span> <span class="token literal-property property">recipes</span><span class="token operator">:</span> Recipe<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>	<span class="token function">getRecipes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token comment">// get a copy from outside, not access the original recipes</span><br>		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>recipes<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>👉 <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax>Spread operator</a>. (<code>...var</code>)<pre class=language-jsx><code class=language-jsx><span class="token comment">// ES6's feature (spread operator): tranform "[a, b, c]" to "a, b, c"</span><br><span class="token comment">// because we cannot .push([]), but we can .push(a,b,c)</span><br><span class="token keyword">this</span><span class="token punctuation">.</span>ingredients<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>ingredients<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=language-html><code class=language-html><span class="token comment">&lt;!-- if we just bind a string --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">abcXyz</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>abc<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">[abcXyz]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>abc<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">[abcXyz]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[<span class="token punctuation">'</span>abc<span class="token punctuation">'</span>]<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><br><span class="token comment">&lt;!-- if we bind objects --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">abcXyz</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// convert from string to number</span><br><span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>abc<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// just add "+" before it!</span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// an optional param in a method</span><br><span class="token function">abc</span><span class="token punctuation">(</span><span class="token parameter">required_1<span class="token punctuation">,</span> required_2<span class="token punctuation">,</span> optional<span class="token operator">?</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// with "?"</span><br>	<span class="token operator">...</span><br><span class="token punctuation">}</span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// When creating a new service (example.service.ts), you wanna add it in</span><br><span class="token comment">// app.module.ts in the section "providers"</span><br><br><span class="token comment">// You can make a shortcut right in the file example.service.ts</span><br><span class="token comment">// and no need to give it name in app.module.ts</span><br>@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">providedIn</span><span class="token operator">:</span> <span class="token string">'root'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// inject a service in a component</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token punctuation">{</span><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> <span class="token literal-property property">serviceName</span><span class="token operator">:</span> ServiceName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><br>	<span class="token comment">// then you can use it here!</span><br><span class="token punctuation">}</span></code></pre><h2 id=services-%26-dependency-injection tabindex=-1>Services & Dependency Injection <a href=#services-%26-dependency-injection class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><h3 id=service%3F tabindex=-1>Service? <a href=#service%3F class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><ul><li>Don't duplicate tasks.<li>Access data and used in somewhere.<li>Just another class which help centralize your codes.</ul><p><img alt=Angular_2_-Services&Dependency_Injection&_Rout_fb1390f6e4ee48849ae39feb665bdf1b/Untitled.png src=/img/post/angular/angular-2/Untitled.png><p>Why we need services? If we don't use, just use what we have (binding, emit,...) → more components and they need to communicate to each other → too complicated!<h3 id=di-%26-logging-service tabindex=-1>DI & Logging service <a href=#di-%26-logging-service class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><ul><li><a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656208#questions/7884774>Course video</a>.<li>Naming: <code>logging.service.ts</code><li>There is NO DECORATOR like @Service() → just a normal typescript class!</ul><p>DI injects class (of a service) into our component automatically. ← we need to inform angular that we need to add this instant → add a constructor<p>👉 <a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/09-services-final/src/app>Codes for this section</a>.<pre class=language-jsx><code class=language-jsx><span class="token comment">// new-account.component.ts</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> LoggingService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../logging.service'</span><span class="token punctuation">;</span><br><br>@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>	<span class="token literal-property property">providers</span><span class="token operator">:</span> <span class="token punctuation">[</span>LoggingService<span class="token punctuation">]</span> <span class="token comment">// 2) angular know how to gives us this instan</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token punctuation">{</span><br><br>	<span class="token comment">// 1) tell angular: we need an instance of LoggingService class</span><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> <span class="token literal-property property">loggingService</span><span class="token operator">:</span> LoggingService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br>									<span class="token comment">//  ^ custom name</span><br><br>	<span class="token comment">// use it</span><br>	<span class="token function">onCreateAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token operator">...</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>loggingService<span class="token punctuation">.</span><span class="token function">logStatusChange</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// angular created this for us auto</span><br><span class="token comment">//  ^ reuse this line multiple times in multiple components</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h3 id=data-service tabindex=-1>Data Service <a href=#data-service class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>Service: store and manage our data → exchange property & event binding → get event to app component.<p>👉 <a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/09-services-final/src/app>Codes for this section</a>.<pre class=language-jsx><code class=language-jsx><span class="token comment">// reference pointing</span><br><span class="token keyword">this</span><span class="token punctuation">.</span>accounts <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>accountsService<span class="token punctuation">.</span>accounts<span class="token punctuation">;</span><br><span class="token comment">// they are actually the same object (ie. this.accountsService.accounts)</span></code></pre><p>Without account services, we have to emit & output our data and event (add acc for example). However, with services, we don't need them anymore, just inject the service and put the account into it!<h3 id=hierarchical-injector tabindex=-1>Hierarchical injector <a href=#hierarchical-injector class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>Inject a service to father → all its child component get the same instance of the service! ⇒ only go down in the tree components → if there is a duplicate in child, it will overwrite the father's.<p><img alt=Angular_2_-Services&Dependency_Injection&_Rout_fb1390f6e4ee48849ae39feb665bdf1b/Untitled_1.png src=/img/post/angular/angular-2/Untitled_1.png><p>[<a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656222#overview>video</a>] If don't want create A NEW INSTANCE IN CHILD (which will overwrite the one coming from father) → just remove the service in <code>providers</code>! → it will use the service of the father.<h3 id=inject-services-into-services tabindex=-1>Inject Services into Services <a href=#inject-services-into-services class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><ul><li><p>Normally, if service A doesn't contain (inject) any service → no need <code>@Injectable()</code><li><p>If we wanna inject service B into service A → we need to add <code>@Injectable()</code> into A (not B!!!!)<pre class=language-jsx><code class=language-jsx><span class="token comment">// service B</span><br><br><span class="token comment">// service A</span><br>@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ServiceA</span> <span class="token punctuation">{</span><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> <span class="token literal-property property">serviceB</span><span class="token operator">:</span> ServiceB</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br>	<span class="token comment">// something using serviceB</span><br><span class="token punctuation">}</span></code></pre></ul><p><strong>GOOD PRACTICE</strong>: ALWAYS ADD <code>@Injectable()</code> for all services!<h3 id=services-with-cross-components tabindex=-1>Services with cross-components <a href=#services-with-cross-components class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>With services, we don't have to build complex inputs, outputs chanes where you pass events and properties to get data from component A to B,... → much cleaner!<p>👉 <a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/09-services-final/src/app>Codes for this section</a>.<pre class=language-jsx><code class=language-jsx><span class="token comment">// accounts.service.ts</span><br>@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AccountsService</span> <span class="token punctuation">{</span><br>	statusUpdated <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">></span></span><span class="token plain-text">();<br>}<br><br>// account.component.ts<br>@Component(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain-text">)<br>export class AccountComponent </span><span class="token punctuation">{</span><br>  @<span class="token function">Input</span><span class="token punctuation">(</span><span class="token punctuation">)</span> account<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">status</span><span class="token operator">:</span> string<span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> <span class="token literal-property property">accountsService</span><span class="token operator">:</span> AccountsService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br>					 <span class="token comment">// ^ a shorthand to create a property with the same name as</span><br>					 <span class="token comment">//   "accountService" &lt;- we can "this.accountService".</span><br>  <span class="token function">onSetTo</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">status</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token operator">...</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>accountsService<span class="token punctuation">.</span>statusUpdated<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// emit an event</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token plain-text"><br><br>// new-account.component.ts<br>@Component(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain-text">)<br>export class NewAccountComponent </span><span class="token punctuation">{</span><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> <span class="token literal-property property">accountsService</span><span class="token operator">:</span> AccountsService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>accountsService<span class="token punctuation">.</span>statusUpdated<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span> <span class="token comment">// event is observable!</span><br>      <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">status</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'New Status: '</span> <span class="token operator">+</span> status<span class="token punctuation">)</span> <span class="token comment">// capture that event!</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token plain-text"></span></code></pre><p>👉 Example: <a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/10-services-assignment-solution/src/app>exchange active / inactive users</a>.<br>👉 <a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/11-prj-services-final/src/app/recipes>Project with recipes and shopping-list</a>. (change from using EventEmitter to service) — <a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656236#overview>videos</a><h3 id=service---pushing-data-from-a-b tabindex=-1>Service - pushing data from A-B <a href=#service---pushing-data-from-a-b class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>When we use <code>.slice()</code> to copy a list (to work on this), there may be some event cannot access the original one (eg. when using <code>addIngredients</code>) → we need to emit an event containing the original list.<p>👉 <a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/11-prj-services-final/src/app/shopping-list>Codes for this section</a><pre class=language-jsx><code class=language-jsx><span class="token comment">// shopping-list.service.ts</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token punctuation">{</span><br>	ingredientsChanged <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token operator">&lt;</span>Ingredient<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token keyword">private</span> <span class="token literal-property property">ingredients</span><span class="token operator">:</span> Ingredient<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>	<span class="token operator">...</span><br>	<span class="token function">addIngredient</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">ingredient</span><span class="token operator">:</span> Ingredient</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>ingredients<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>ingredient<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>ingredientsChanged<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ingredients<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// shopping-list.component.ts</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span> <span class="token punctuation">{</span><br>	<span class="token literal-property property">ingredients</span><span class="token operator">:</span> Ingredient<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> <span class="token literal-property property">slService</span><span class="token operator">:</span> ShoppingListService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><br>	<span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	  <span class="token operator">...</span><br>	  <span class="token keyword">this</span><span class="token punctuation">.</span>slService<span class="token punctuation">.</span>ingredientsChanged<br>	    <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><br>	      <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">ingredients</span><span class="token operator">:</span> Ingredient<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>	        <span class="token keyword">this</span><span class="token punctuation">.</span>ingredients <span class="token operator">=</span> ingredients<span class="token punctuation">;</span><br>	      <span class="token punctuation">}</span><br>	    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h2 id=routing-%E2%86%92-change-pages tabindex=-1>Routing → change pages <a href=#routing-%E2%86%92-change-pages class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><p>👉 <a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/12-routing-final/src/app>Codes for this section</a><br>👉 <a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/13-prj-routing-final/src/app>Example of final project using routing</a>.<h3 id=adding-routes tabindex=-1>Adding Routes <a href=#adding-routes class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>Angular ships its own <em>router</em> which allows to change URLs of our application.<p>Where? ⇒ Because the router controls URLs of all things in our apps, the place we can put it is in <code>app.module.ts</code><pre class=language-jsx><code class=language-jsx><span class="token comment">// app-routing.module.ts</span><br><span class="token comment">//----------------------</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> Routes<span class="token punctuation">,</span> RouterModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/router'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token literal-property property">appRoutes</span><span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span><br>	<span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> HomeComponent <span class="token punctuation">}</span><span class="token punctuation">,</span><br>	<span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> UsersComponent <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// something: http//localhost:4200/users</span><br>				<span class="token comment">//^ without "/"</span><br>	<span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'servers'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> ServersComponent <span class="token punctuation">}</span><br><span class="token punctuation">]</span><br><br>@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>	<span class="token keyword">import</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>		RouterModule<span class="token punctuation">.</span><span class="token function">forRoot</span><span class="token punctuation">(</span>appRoutes<span class="token punctuation">)</span><br>							<span class="token comment">// ^ register our routes to the RouterModule of our app</span><br>	<span class="token punctuation">]</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// where to display component after click?</span><br><span class="token comment">// app.component.html</span><br><span class="token comment">//----------------------</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-outlet</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-outlet</span><span class="token punctuation">></span></span> <span class="token comment">// &lt;- a directive shipped by angular!!!</span></code></pre><h3 id=routerlink tabindex=-1><code>routerLink</code> <a href=#routerlink class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>Add some links to app (<a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656284#overview>video</a>)<pre class=language-html><code class=language-html><span class="token comment">&lt;!-- if we add links to a normal &lt;a> => it will reload the app! --></span><br><span class="token comment">&lt;!-- => USE A SPECIAL DIRECTIVE "rounterLink" --></span><br><span class="token comment">&lt;!-- app.component.html --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">routerLink</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">routerLink</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/servers<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">[routerLink]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[<span class="token punctuation">'</span>/users<span class="token punctuation">'</span>]<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>			<span class="token comment">&lt;!-- ^ we can use "'/users'" &lt;- has to have '' because without it, --></span><br>			<span class="token comment">&lt;!-- |   angular will look for a property "/users" instead of a string --></span><br>			<span class="token comment">&lt;!-- ^ we use [] to add more complicated path here --></span><br>			<span class="token comment">&lt;!--   for example, ['/users', 'something'] &lt;- /users/something --></span><br><br><span class="token comment">&lt;!-- routerLink capture the click event + prevent the default behavior (which reloads --></span><br><span class="token comment">&lt;!-- entire our app) --></span></code></pre><h3 id=understand-paths tabindex=-1>Understand paths <a href=#understand-paths class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>(<a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656286#overview>video</a>) Why we need <code>"/"</code> before <code>"/servers"</code>? → if we on home page, it't normal, but if we in subpage (eg. /servers), if there is another link to "servers" (eg. <code>&lt;a routerLink='servers'></code>), it will be "<code>/servers/servers</code>" ← error!!!<p>We can <em>relative / absolute paths</em> inside <code>routerLink</code>.<pre class=language-jsx><code class=language-jsx>routerLink<span class="token operator">=</span><span class="token string">"/abc"</span> <span class="token comment">// abs path: localhost:4200/abc</span><br>routerLink<span class="token operator">=</span><span class="token string">"abc"</span> <span class="token comment">// if you are in localhost:4200/xyz -> localhost:4200/xyz/abc</span><br>routerLink<span class="token operator">=</span><span class="token string">"./abc"</span> <span class="token comment">// relative path: current position + /abc</span><br>routerLink<span class="token operator">=</span><span class="token string">"../abc"</span> <span class="token comment">// relative path: father path + /abc</span></code></pre><h3 id=routerlinkactive tabindex=-1><code>routerLinkActive</code> <a href=#routerlinkactive class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>We use <code>&lt;a class="active"></code> for current tab. ← how to use angular to add/remove this class auto?<pre class=language-jsx><code class=language-jsx><span class="token comment">// don't forget to add "routerLinkActive" to ALL "li"</span><br><span class="token operator">&lt;</span>li routerLinkActive<span class="token operator">=</span><span class="token string">"active"</span> <span class="token punctuation">[</span>routerLinkActiveOptions<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"{exact: true}"</span><span class="token operator">></span><br>									<span class="token comment">//  ^css class                      //  ^only active if it's exactly the FULL path</span><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">routerLink</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/servers<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">Servers</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br><br><span class="token comment">// we add "routerLinkAcitve" inside &lt;a> if we want</span></code></pre><p>(<a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656288#overview>video</a>) <code>routerLinkActive</code> will check if the current path contains the path given in <code>routerLink</code> ← the empty path, ie. <code>"/"</code> is in all paths!!! → this may lead to a problem in which "Home" tab is always "active" ⇒ we need <code>routerLinkActiveOptions</code><h3 id=navigating-programmatically tabindex=-1>Navigating programmatically <a href=#navigating-programmatically class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>Perform navigation after users click on some button, for example.<p>👉 <a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/12-routing-final/src/app>Codes for this section</a><pre class=language-jsx><code class=language-jsx><span class="token comment">// home.component.html</span><br><span class="token operator">&lt;</span><span class="token function">button</span> <span class="token punctuation">(</span>click<span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">"onLoadServers()"</span><span class="token operator">></span>Load servers<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><br><span class="token comment">// home.component.ts</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token punctuation">{</span><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> <span class="token literal-property property">router</span><span class="token operator">:</span> Router</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><br>	<span class="token function">onLoadServers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token comment">// complex calculations</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'/servers'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>If we want <code>.navigate()</code> knows where we are,<pre class=language-jsx><code class=language-jsx><span class="token comment">// servers.component.html</span><br><span class="token operator">&lt;</span><span class="token function">button</span> <span class="token punctuation">(</span>click<span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">"onReload()"</span><span class="token operator">></span>Reload page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><br><span class="token comment">// servers.component.html</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token punctuation">{</span><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> <span class="token literal-property property">router</span><span class="token operator">:</span> Router<span class="token punctuation">,</span><br>							<span class="token keyword">private</span> <span class="token literal-property property">route</span><span class="token operator">:</span> ActivatedRoute</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>													<span class="token comment">// ^simply inject current route which load the component</span><br>													<span class="token comment">// a route => simply a javascript object</span><br><span class="token punctuation">}</span><br><br>	<span class="token function">onReload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'/servers'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>						<span class="token comment">// ^with this method, we don't get the problem of</span><br>						<span class="token comment">// /servers/servers like in routerLink if we use ['servers']</span><br>						<span class="token comment">// REASON: .navigate() doesn't know where we currently are, it just</span><br>						<span class="token comment">//   know the path of template -> '/servers' is the same as 'servers'</span><br><br>		<span class="token comment">// If we wanna use relative path with .navigate()?</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'/servers'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">relativeTo</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>											<span class="token comment">//  ^             ^with this, angular knows what is currenty</span><br>											<span class="token comment">//  |                active route</span><br>											<span class="token comment">//  | we can use ['../'] (like a relative path)</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h3 id=add-params-to-route tabindex=-1>Add params to Route <a href=#add-params-to-route class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>(Videos: <a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656296#overview>Passing params to Routes</a> + <a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656298#overview>Fetching Route params</a> + <a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656302#overview>fetch reactively</a>) For example we wanna navigate to users, each user a path → change with ids. ← <code>id</code> will be the param of the Route.<p>👉 <a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/12-routing-final/src/app>Codes for this section</a>.<pre class=language-jsx><code class=language-jsx><span class="token comment">// app-routing.module.ts</span><br><span class="token keyword">const</span> <span class="token literal-property property">appRoutes</span><span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span><br>	<span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'users/:id/:name'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> UserComponent <span class="token punctuation">}</span><br>					<span class="token comment">//     ^without this, localhost/users/something will get error!</span><br><span class="token punctuation">]</span></code></pre><p>Get the <code>id</code> from the router,<pre class=language-jsx><code class=language-jsx><span class="token comment">// user.component.ts</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> ActivatedRoute<span class="token punctuation">,</span> Params <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/router'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> Subscription <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs/Subscription'</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token punctuation">{</span><br>	<span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">}</span><span class="token punctuation">;</span><br>	<span class="token literal-property property">paramsSubscription</span><span class="token operator">:</span> Subscription<span class="token punctuation">;</span><br><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> <span class="token literal-property property">route</span><span class="token operator">:</span> ActivatedRoute</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><br>					<span class="token comment">//  ^ gives us access to the id passed in the URL -> selected user</span><br><br>	<span class="token function">ngOninit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token comment">// OPTION 1: INITIAL ONLY</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> <span class="token punctuation">{</span><br>			<span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>snapshot<span class="token punctuation">.</span>params<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// &lt;- from 'users/:id'</span><br>								<span class="token comment">//   ^it's just a snapshot of the 1st initialization</span><br>			<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>snapshot<span class="token punctuation">.</span>params<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token comment">// &lt;- from 'users/:id/:name'</span><br>									<span class="token comment">//     if we change url dynamically, it won't work!</span><br>		<span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>		<span class="token comment">// OPTION 2: subscribe to the change of url (whenever we click)</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>paramsSubscription<br>			<span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>params<br>							 <span class="token comment">// ^it's an observable -> help you work with async tasks</span><br>																											 <span class="token comment">//   ^in the future, users perform some tasks</span><br>																											 <span class="token comment">//   -> you don't know where, when, how long,...</span><br>	      <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><br>	        <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">params</span><span class="token operator">:</span> Params</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>	          <span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token operator">+</span>params<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// "+" to convert to number</span><br>	          <span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">.</span>name <span class="token operator">=</span> params<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>	        <span class="token punctuation">}</span><br>	      <span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><br>	<span class="token function">ngOnDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>paramsSubscription<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// end of subscription!</span><br>		<span class="token comment">// in fact, for this router, you don't have to do this because</span><br>		<span class="token comment">//   angular will destroy the subscription for you</span><br>		<span class="token comment">//   but in general case for OBSERVABLE THAT YOU CREATED,</span><br>		<span class="token comment">//   you should .unsubcribe() it!</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// user.component.html</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">User with ID </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">User with name </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre><p><strong>GOOD PRACTICE:</strong> Always <code>.unsubscribe()</code> the observable has been created!<h3 id=query-params-(%3F...) tabindex=-1>Query params (?...) <a href=#query-params-(%3F...) class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>👉 <a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656308#overview>Video for this section</a>.<pre class=language-jsx><code class=language-jsx><span class="token comment">// inside an a tag in html</span><br><span class="token operator">&lt;</span>a<br>  <span class="token punctuation">[</span>routerLink<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"['/servers', server.id]"</span> <span class="token comment">// locahost/servers/3</span><br>  <span class="token punctuation">[</span>queryParams<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"{allowEdit: server.id === 3 ? '1' : '0'}"</span> <span class="token comment">// .../3?allowEdit=1</span><br>  fragment<span class="token operator">=</span><span class="token string">"loading"</span> <span class="token comment">// ...?allowEdit=1#loading</span><br>  <span class="token operator">></span><br>  <br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// navigate from a button?</span><br><span class="token comment">// servers.component.html</span><br><span class="token operator">&lt;</span><span class="token function">button</span> <span class="token punctuation">(</span>click<span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">"onReload()"</span><span class="token operator">></span>Reload page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// servers.component.html</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token punctuation">{</span><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> <span class="token literal-property property">router</span><span class="token operator">:</span> Router</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><br><br>	<span class="token function">onReload</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">id</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token comment">// localhost/servers/1/edit?allowEdit=1#loading</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'/servers'</span><span class="token punctuation">,</span> id<span class="token punctuation">,</span> <span class="token string">'edit'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>			<span class="token punctuation">{</span><br>				<span class="token literal-property property">queryParams</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">allowEdit</span><span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>				<span class="token literal-property property">fragment</span><span class="token operator">:</span> <span class="token string">'loading'</span><br>			<span class="token punctuation">}</span><br>		<span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>How to retrieve the informatoin from the URLs? ⇒ check <a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656314#overview>video</a>.<pre class=language-jsx><code class=language-jsx><span class="token comment">// edit-server.component.ts</span><br><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> <span class="token literal-property property">route</span><span class="token operator">:</span> ActivatedRoute</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><br>								 <span class="token comment">// ^simply inject current route which load the component</span><br><br><span class="token comment">// 1st approach -> only get the ones created on init</span><br><span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>snapshot<span class="token punctuation">.</span>queryParams<span class="token punctuation">)</span><span class="token punctuation">;</span><br>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>snapshot<span class="token punctuation">.</span>fragment<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// 2nd approach -> allow you to react to the change of query params</span><br><span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	<span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>queryParams<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>fragement<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h3 id=nested-%2F-child-router tabindex=-1>Nested / Child router <a href=#nested-%2F-child-router class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>(<a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656322#overview>video</a> + <a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/12-routing-final/src/app>codes</a>) No need to change to a new page for each child component, just display them on a sidebar (a part of the view) when we click on the navigator.<pre class=language-jsx><code class=language-jsx><span class="token comment">// app-routing.module.ts</span><br><span class="token keyword">const</span> <span class="token literal-property property">appRoutes</span><span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span><br>	<span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'servers'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> ServersComponent<span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>		<span class="token punctuation">{</span><span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">':id'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> ServerComponent<span class="token punctuation">}</span><span class="token punctuation">,</span><br>		<span class="token punctuation">{</span><span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">':id/edit'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> EditServerComponent <span class="token punctuation">}</span><br>	<span class="token punctuation">]</span> <span class="token punctuation">}</span><br><span class="token punctuation">]</span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// servers.component.html</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-outlet</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-outlet</span><span class="token punctuation">></span></span> <span class="token comment">// replace "old" &lt;app-server> and &lt;app-edit-server></span><br><span class="token comment">//^ all the child routes inside this component will be shipped by angular</span><br><span class="token comment">//  -> that's why we have several "the same" &lt;router-outlet> in our app</span></code></pre><h3 id=preserve-query-params-between-paths tabindex=-1>Preserve query params between paths <a href=#preserve-query-params-between-paths class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>Before enter to edit-server, there is <code>?allowEdit=1</code>, however, after navigate to edit-server, this info is gone. How to preserve it?<pre class=language-jsx><code class=language-jsx><span class="token comment">// server.component.ts</span><br><span class="token function">onEdit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	<span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><br>		<span class="token punctuation">[</span><span class="token string">'edit'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>		<span class="token punctuation">{</span><br>			<span class="token literal-property property">relativeTo</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">,</span><br>			<span class="token literal-property property">queryParamsHandling</span><span class="token operator">:</span> <span class="token string">'preserve'</span><br>											<span class="token comment">//   ^keep the old + overwrite to the new one</span><br>											<span class="token comment">//   ^'merge' if you wanna merge old + new</span><br>		<span class="token punctuation">}</span><br>	<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h3 id=redirect-%26-wildcat-routes tabindex=-1>Redirect & wildcat routes <a href=#redirect-%26-wildcat-routes class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>For example: building 404 page.<pre class=language-jsx><code class=language-jsx><span class="token keyword">const</span> <span class="token literal-property property">appRoutes</span><span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span><br>	<span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'not-found'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> PageNoteFoundComponent <span class="token punctuation">}</span><span class="token punctuation">,</span><br>	<span class="token comment">// a specific path</span><br>	<span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'something'</span><span class="token punctuation">,</span> <span class="token literal-property property">redirectTo</span><span class="token operator">:</span> <span class="token string">'/not-found'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// redirect /something to /not-found</span><br>	<span class="token comment">// all the paths (performed after THE ABOVE &lt;- order makes sense!!!!)</span><br>	<span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'**'</span><span class="token punctuation">,</span> <span class="token literal-property property">redirectTo</span><span class="token operator">:</span> <span class="token string">'/not-found'</span> <span class="token punctuation">}</span><br><span class="token punctuation">]</span></code></pre><p>Error of <code>path: ''</code> (nothing) ← default behavior to check in angular is "prefix" (check from beginning) → every urls contains this "nothing" (<code>''</code>)<pre class=language-jsx><code class=language-jsx><span class="token comment">// errors</span><br><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">redirectTo</span><span class="token operator">:</span> <span class="token string">'/somewhere-else'</span> <span class="token punctuation">}</span><br><br><span class="token comment">// fix</span><br><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">redirectTo</span><span class="token operator">:</span> <span class="token string">'/somewhere-else'</span><span class="token punctuation">,</span> <span class="token literal-property property">pathMatch</span><span class="token operator">:</span> <span class="token string">'full'</span> <span class="token punctuation">}</span></code></pre><h3 id=app-routing.module.ts tabindex=-1><code>app-routing.module.ts</code> <a href=#app-routing.module.ts class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>Store all routing tasks in a single file. → no need to stored in <code>app.module.ts</code>.<p>👉 <a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/blob/master/12-routing-final/src/app/app-routing.module.ts>Example file</a>.<pre class=language-jsx><code class=language-jsx><span class="token comment">// app-routing.module.ts</span><br><span class="token comment">// no need to re-declare components like already done in app.module.ts</span><br><span class="token keyword">const</span> <span class="token literal-property property">appRoutes</span><span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>	<span class="token literal-property property">imports</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>		RouterModule<span class="token punctuation">.</span><span class="token function">forRoot</span><span class="token punctuation">(</span>appRoutes<span class="token punctuation">)</span><br>	<span class="token punctuation">]</span><span class="token punctuation">,</span><br>	<span class="token literal-property property">exports</span><span class="token operator">:</span> <span class="token punctuation">[</span>RouterModule<span class="token punctuation">]</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppRoutingModule</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// app.module.ts</span><br><span class="token operator">...</span><br>@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>	<span class="token operator">...</span><br>	<span class="token literal-property property">imports</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>		AppRoutingModule<br>	<span class="token punctuation">]</span><br>	<span class="token operator">...</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h3 id=login-%26-guards-%26-authentication tabindex=-1>Login & Guards & Authentication <a href=#login-%26-guards-%26-authentication class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>(<a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656342#overview>video</a>) Create <code>auth-guard.service.ts</code> (<a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/blob/master/12-routing-final/src/app/auth-guard.service.ts>file</a>) containing the service to control the authentication. → use <code>CanActivate</code> ← <mark>angular executes this before router loaded!</mark><pre class=language-jsx><code class=language-jsx><span class="token comment">// auth-guard.service.ts</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AuthGuard</span> <span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">{</span><br>	<span class="token function">canActivate</span><span class="token punctuation">(</span><br>	  <span class="token literal-property property">state</span><span class="token operator">:</span> RouterStateSnapshot<span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>boolean</span><span class="token punctuation">></span></span><span class="token plain-text"> | Promise</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>boolean</span><span class="token punctuation">></span></span><span class="token plain-text"> | boolean </span><span class="token punctuation">{</span><br><br>	<span class="token comment">// Obersvable / Promise -> some tasks need auth from server/databse &lt;- async</span><br>	<span class="token comment">// boolean -> some tasks completely on client &lt;- sync</span><br><span class="token punctuation">}</span><span class="token plain-text"></span></code></pre><p>Example: <code>auth.service.ts</code> → a fake service for the testing. In real app, we use this file to get the info / confirmation from the server about the authentication!<p>Apply to routes?<pre class=language-jsx><code class=language-jsx><span class="token comment">// app-routing.module.ts</span><br><span class="token punctuation">{</span><span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span> <span class="token literal-property property">canActivate</span><span class="token operator">:</span> <span class="token punctuation">[</span>AuthGuard<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">}</span> <span class="token comment">// apply also for children</span><br><span class="token comment">//            ^add this to the path you wanna apply auth</span></code></pre><p>(<a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656356#overview>video</a>) Show the father route list, only protect child routes? → use <code>CanActivateChild</code><pre class=language-jsx><code class=language-jsx><span class="token comment">// auth-guard.service.ts</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AuthGuard</span> <span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">{</span><br>	<span class="token function">canActivate</span><span class="token punctuation">(</span><br>	  <span class="token literal-property property">state</span><span class="token operator">:</span> RouterStateSnapshot<span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>boolean</span><span class="token punctuation">></span></span><span class="token plain-text"> | Promise</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>boolean</span><span class="token punctuation">></span></span><span class="token plain-text"> | boolean </span><span class="token punctuation">{</span><br><br>	<span class="token function">canActivateChild</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token plain-text"><br><br>// app-routing.module.ts<br></span><span class="token punctuation">{</span><span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span> <span class="token literal-property property">canActivateChild</span><span class="token operator">:</span> <span class="token punctuation">[</span>AuthGuard<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">}</span><span class="token plain-text"></span></code></pre><p>(<a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656346#overview>video</a> + <a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/blob/master/12-routing-final/src/app/servers/edit-server/can-deactivate-guard.service.ts>file</a>) Control whether you are allowed to leave a route or not ← <mark>Confirm to leave the input/changes</mark>!!! solve the problem of user accidentially navigating away!!!<p><strong>Idea</strong>: angular router can execute <code>canDeactivate()</code> in a service (<code>can-deactivate-guard.service.ts</code>) > component we are currently on has <code>canDeactivate()</code> ← how guard communicates with our components.<pre class=language-jsx><code class=language-jsx><span class="token comment">// can-deactivate-guard.service.ts</span><br><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">CanComponentDeactivate</span> <span class="token punctuation">{</span><br>	<span class="token function function-variable">canDeactivate</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> Observable<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>boolean</span><span class="token punctuation">></span></span><span class="token plain-text"> | Promise</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>boolean</span><span class="token punctuation">></span></span><span class="token plain-text"> | boolean;<br>}<br><br>export class CanDeactivateGuard implements canDeactivate</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CanComponentDeactivate</span></span><span class="token punctuation">></span></span><span class="token plain-text"> </span><span class="token punctuation">{</span><br>	<span class="token function">canDeactivate</span><span class="token punctuation">(</span>component<span class="token operator">:</span> CanComponentDeactivate<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token operator">...</span> <span class="token punctuation">{</span><br>		<span class="token keyword">return</span> component<span class="token punctuation">.</span><span class="token function">canDeactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token plain-text"></span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// app-routing.module.ts</span><br><span class="token punctuation">{</span><span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">,</span> <span class="token literal-property property">canDeactivate</span><span class="token operator">:</span> <span class="token punctuation">[</span>CanDeactivateGuard<span class="token punctuation">]</span><span class="token punctuation">}</span><br><br><span class="token comment">// app.module.ts</span><br><span class="token literal-property property">providers</span><span class="token operator">:</span> <span class="token punctuation">[</span>CanDeactivate<span class="token punctuation">]</span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// edit-server.component.ts</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token keyword">implements</span> <span class="token class-name">CanComponentDeactivate</span> <span class="token punctuation">{</span><br>	<span class="token function">canDeactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">...</span> <span class="token punctuation">{</span><br>		<span class="token comment">// check if there are some changes and return true/false</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h3 id=parsing-static-data-to-route tabindex=-1>Parsing static data to route <a href=#parsing-static-data-to-route class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>(<a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656358#overview>video</a> + <a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/12-routing-final/src/app>code</a>) Navigate to an error page with custom message from route.<pre class=language-jsx><code class=language-jsx><span class="token comment">// error-page.component.html</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// error-page.component.ts</span><br><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ErrorPageComponent</span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span> <span class="token punctuation">{</span><br>	<span class="token literal-property property">errorMessage</span><span class="token operator">:</span> string<span class="token punctuation">;</span><br><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> <span class="token literal-property property">route</span><span class="token operator">:</span> ActivatedRoute</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><br>									<span class="token comment">//  ^simply inject current route which load the component</span><br><br>	<span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>errorMessage <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>snapshot<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>																				<span class="token comment">//  ^ there is "data" in app-routing.module.ts</span><br>		<span class="token comment">// or subscribe to the changes</span><br>		<span class="token comment">// (including the init snapshot)</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><br>      <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">data</span><span class="token operator">:</span> Data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        <span class="token keyword">this</span><span class="token punctuation">.</span>errorMessage <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// app-routing.module.ts</span><br><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'not-found'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> ErrorPageComponent<span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'Page not found!'</span><span class="token punctuation">}</span> <span class="token punctuation">}</span></code></pre><h3 id=parsing-dynamic-data-(server)-to-route tabindex=-1>Parsing dynamic data (server) to route <a href=#parsing-dynamic-data-(server)-to-route class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>(<a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656360#overview>video</a> + <a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/12-routing-final/src/app/servers>codes</a>) Display the component after fetch from the server (async data) → should watch the videos + below notes:<pre class=language-jsx><code class=language-jsx><span class="token comment">// server-resolver.service.ts</span><br><span class="token function">resolve</span><span class="token punctuation">(</span>route<span class="token operator">:</span> ActivatedRouteSnapshot<span class="token punctuation">,</span> <span class="token literal-property property">state</span><span class="token operator">:</span> RouterStateSnapshot<span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Server</span></span><span class="token punctuation">></span></span><span class="token plain-text"> | Promise</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Server</span></span><span class="token punctuation">></span></span><span class="token plain-text"> | Server </span><span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>serversService<span class="token punctuation">.</span><span class="token function">getServer</span><span class="token punctuation">(</span><span class="token operator">+</span>route<span class="token punctuation">.</span>params<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>													<span class="token comment">// ^this service here will rerendered whenever we</span><br>													<span class="token comment">// rerender the route</span><br><span class="token punctuation">}</span><span class="token plain-text"><br>// unlike the component itself, this is executed each time, so no need to set<br>// up an observable or something like that</span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// app-routing.module.ts</span><br><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token operator">...</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span><span class="token operator">...</span><span class="token punctuation">,</span> <span class="token literal-property property">resolver</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">server</span><span class="token operator">:</span> ServerResolver<span class="token punctuation">}</span> <span class="token punctuation">}</span><br>																	<span class="token comment">//  ^choose a name you like</span><br><span class="token comment">// but make sure "server" is set the same in</span><br><span class="token comment">// server.component.ts_____________________</span><br><span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                         <span class="token comment">//    |</span><br>	<span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>data                  <span class="token comment">//      |</span><br>		<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>                  <span class="token comment">//        |</span><br>			<span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">data</span><span class="token operator">:</span> Data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>server <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'server'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><br>		<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h3 id=location-strategies tabindex=-1>Location strategies <a href=#location-strategies class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>(<a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656364#overview>video</a>) When deployment, all URLs are parsed by the server (which hosts your app) first → then angular → route of angular (eg. nagivate something strange page to not found) may not work like on localhost. → need to make sure your web server return html file you want!<p>Hash mode routing → informs your web server on care the part of URL before "#"! → all things behind will be ignored by webserver.<pre class=language-jsx><code class=language-jsx><span class="token literal-property property">localhost</span><span class="token operator">:</span><span class="token operator">/</span>users <span class="token operator">-</span><span class="token operator">></span> localhost<span class="token operator">:</span><span class="token operator">/</span>#<span class="token operator">/</span>users<br>													<span class="token comment">//   ^from this to end: ignored by webserver</span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// app-routing.module.ts</span><br>@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>	<span class="token literal-property property">imports</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>		RouterModule<span class="token punctuation">.</span><span class="token function">forRoot</span><span class="token punctuation">(</span>appRoutes<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">useHash</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><br>	<span class="token punctuation">]</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token operator">...</span></code></pre></div><script type=application/ld+json>{
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": "MOOC: Angular 2 - Services &amp; DI &amp; Routing",
        "image": [],
        "author": "Anh-Thi DINH",
        "url": "https://dinhanhthi.com/angular-2-service-dependency-injection-routing/",
        "mainEntityOfPage": "https://dinhanhthi.com/angular-2-service-dependency-injection-routing/",
        "datePublished": "04-03-2021",
        "dateModified": "2021-03-04",
        "description": "This is my note for the course &amp;quot;Angular - The Complete Guide (2021 Edition)&amp;quot; which is taught by Maximilian Schwarzmüller on Udemy...."
      }</script></article></main><footer><a href=/ target=_blank>Thi  ©  2022 </a> •  <a href=/about-the-notes/ >About this site </a> •  <a href=https://photos.app.goo.gl/9OVEkdTjmtRPg7vC3 target=_blank>My sketches </a> •  <a href=https://goo.gl/photos/yQXdQws1LLS16x5v5 target=_blank>I cook </a> •  <a href=/support-thi/ ><img alt="Support Thi" src=/img_src/icons/coffee.svg class=keep-original height=16 width=auto> Support Thi</a></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.6/elasticlunr.min.js></script><script src=/src/js/components/clipboard.min.js></script><script src="/src/js/main.min.js?hash=d3b51a19b7" async defer></script><a href=/support-thi/ class="floating-button tooltip" id=buy-me-a-coffee><img alt="Support Thi" src=/img_src/icons/coffee.svg class=keep-original> <span class=tooltiptext>Support Thi</span> </a><button class="floating-button tooltip" id=scroll-top-btn><img alt="Scroll to top" src=/img_src/to-top.webp class=keep-original> <span class=tooltiptext>Top</span></button>