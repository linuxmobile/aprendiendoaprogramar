<!doctype html><html domain=.com lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="" http-equiv=Content-Security-Policy><link href=/favicon.svg rel=icon type=image/svg+xml><meta content=#f9c412 name=theme-color><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name=robots><title>MOOC: Angular 3 - Observable | Note of Thi</title><meta content="MOOC: Angular 3 - Observable | Note of Thi" prefix=og:http://ogp.me/ns# property=og:title><meta content="This is my note for the course &amp;quot;Angular - The Complete Guide (2021 Edition)&amp;quot; which is taught by Maximilian Schwarzmüller on Udemy...." name=description><meta content="This is my note for the course &amp;quot;Angular - The Complete Guide (2021 Edition)&amp;quot; which is taught by Maximilian Schwarzmüller on Udemy...." prefix=og:http://ogp.me/ns# property=og:description><meta content=summary_large_image name=twitter:card><meta content=@dinhanhthi name=twitter:site><meta content=@dinhanhthi name=twitter:creator><meta content=https://dinhanhthi.com/img_src/cover.png prefix=og:http://ogp.me/ns# property=og:image><meta content=article prefix=og:http://ogp.me/ns# property=og:type><link href=https://dinhanhthi.com/angular-3-observable/ rel=canonical><meta content=https://dinhanhthi.com/angular-3-observable/ prefix=og:http://ogp.me/ns# property=og:url><meta content=no-referrer-when-downgrade name=referrer><link href=/feed/feed.xml rel=alternate type=application/atom+xml title="🔥 Anh-Thi DINH"><link href=/ rel=preconnect crossorigin><style>body {
      visibility: hidden;
      opacity: 0;
    }</style><noscript><style>body {
        visibility: visible;
        opacity: 1;
      }</style></noscript><script csp-hash>if (/Mac OS X/.test(navigator.userAgent))
      document
        .documentElement
        .classList
        .add('apple')</script><link href=/src/css/main.css rel=stylesheet type=text/css><style>@font-face{font-display:swap;font-family:'fontello';src:url(/fontello/font/fontello.eot?46432155);src:url(/fontello/font/fontello.eot?46432155#iefix) format('embedded-opentype'),url(/fontello/font/fontello.woff2?46432155) format('woff2'),url(/fontello/font/fontello.woff?46432155) format('woff'),url(/fontello/font/fontello.ttf?46432155) format('truetype'),url(/fontello/font/fontello.svg?46432155#fontello) format('svg');font-weight:400;font-style:normal}[class*=" icon-"]:before,[class^=icon-]:before{font-family:"fontello";font-style:normal;font-weight:400;speak:never;display:inline-block;text-decoration:inherit;width:1em;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-doc:before{content:'\e800'}.icon-doc-add:before{content:'\e801'}.icon-stats:before{content:'\e802'}.icon-tags:before{content:'\e803'}.icon-like:before{content:'\e804'}.icon-cog-alt:before{content:'\e805'}.icon-project:before{content:'\e806'}.icon-mooc:before{content:'\e807'}.icon-dl:before{content:'\e808'}.icon-ml:before{content:'\e809'}.icon-python:before{content:'\e80a'}.icon-nlp:before{content:'\e80b'}.icon-r-lang:before{content:'\e80c'}.icon-skill:before{content:'\e80d'}.icon-js-solid:before{content:'\e80e'}.icon-game:before{content:'\e80f'}.icon-web:before{content:'\e810'}.icon-algo:before{content:'\e811'}.icon-mooc-solid:before{content:'\e812'}.icon-chatbot:before{content:'\e813'}.icon-web-dev:before{content:'\e814'}.icon-data:before{content:'\e815'}.icon-skill-solid:before{content:'\e816'}.icon-python-solid:before{content:'\e817'}.icon-project-solid:before{content:'\e818'}.icon-js:before{content:'\e819'}.icon-rocket:before{content:'\e81a'}.icon-ml-solid:before{content:'\e81b'}.icon-game-solid:before{content:'\e81c'}.icon-dl-solid:before{content:'\e81d'}.icon-nlp-solid:before{content:'\e81e'}.icon-web-solid:before{content:'\e81f'}.icon-algo-solid:before{content:'\e820'}.icon-puzzle-outline:before{content:'\e821'}.icon-ng:before{content:'\e822'}.icon-ok:before{content:'\e823'}.icon-link:before{content:'\e824'}.icon-down-circle:before{content:'\e826'}.icon-api:before{content:'\e828'}.icon-right-circle:before{content:'\e829'}.icon-down-open:before{content:'\e82a'}.icon-right-open:before{content:'\e82b'}.icon-copy:before{content:'\f0c5'}.icon-gamepad:before{content:'\f11b'}.icon-fork:before{content:'\f126'}.icon-mlops-solid:before{content:'\f135'}.icon-edu-solid:before{content:'\f19d'}.icon-others-solid:before{content:'\f1b3'}.icon-ds-solid:before{content:'\f1c0'}.icon-chart-area:before{content:'\f1fe'}.icon-chart-pie:before{content:'\f200'}.icon-ts:before{content:'\f201'}.icon-clone:before{content:'\f24d'}</style><body><script>function showTheme() {
        const btn = document.getElementById("toggle-dark-light");
        let toggleIcon = btn.firstElementChild;
        const currentTheme = localStorage.getItem("theme");
        if (currentTheme === "dark") {
          document
            .body
            .classList
            .toggle("dark-theme");
          toggleIcon.src = "/img_src/nav/sun.svg";
        } else if (currentTheme === "light") {
          document
            .body
            .classList
            .toggle("light-theme");
          toggleIcon.src = "/img_src/nav/moon.svg";
        }
      }
      function showContent() {
        document.body.style.visibility = 'visible';
        document.body.style.opacity = 1;
      }
      window.addEventListener('DOMContentLoaded', (event) => {
        showTheme();
        showContent();
      });</script><header class="wave-border wave-border-post"><nav><div id=nav><a href=/ class="nav-item no-effect"><img alt=home src=/img_src/nav/home.svg class=keep-original height=18 width=18> <span>Thi</span> </a><a href=/about/ class="nav-item no-effect"><img alt=about src=/img_src/nav/about.svg class=keep-original height=15 width=15> <span>About</span></a><div class=nav-search id=nav-search><form><input aria-label='search notes (press "/" to focus & "ESC" to lose)' autocomplete=off class=nav-search__input id=nav-search__input onfocusin=inFocus(this) placeholder='search notes (press "/" to focus & "ESC" to lose)' type=search></form><div id=nav-search__result-container style="display: none;"><ul id=nav-search__ul></ul><div id=nav-search__no-result style="display: none;"><p>No results found.</div></div></div><span class="nav-item no-effect nav-dark-light" href="" id=toggle-dark-light><img alt=light-mode src=/img_src/nav/moon.svg class=keep-original height=20 width=20> </span><a href=https://github.com/dinhanhthi class="nav-item no-effect nav-github" target=_blank><img alt=github src=/img_src/nav/github.svg class=keep-original height=20 width=20></a></div><div class=reading-progress-container><div id=reading-progress aria-hidden=true></div></div></nav><script>var divNavSearch=document.getElementById("nav-search"),divRes=document.getElementById("nav-search__result-container"),ulRes=document.getElementById("nav-search__ul");function inFocus(e){""!=e.value&&(divRes.style.display="block")}var isOnDiv=!1;divRes.addEventListener("mouseover",(function(){isOnDiv=!0})),divRes.addEventListener("mouseout",(function(){isOnDiv=!1}));var inputSearch=document.getElementById("nav-search__input");window.addEventListener("click",(function(){ulRes.getElementsByTagName("li").length>=1&&isOnDiv||(divRes.style.display="none")})),inputSearch.addEventListener("click",(e=>{e.stopPropagation()}));const addSelected=e=>{ulRes.querySelectorAll("li").forEach((e=>{e.classList.remove("selected")})),e.classList.add("selected")};var isInView=(e,t)=>{var n=e.offsetTop+e.offsetHeight-t.scrollTop>t.offsetHeight;return e.offsetTop<t.scrollTop?"above":n?"below":"in"};const updateScroll=(e,t)=>{e.offsetTop+e.offsetHeight-t.scrollTop>t.offsetHeight&&(t.scrollTop=e.offsetTop+e.offsetHeight-t.offsetHeight),e.offsetTop<t.scrollTop&&(t.scrollTop=e.offsetTop)};document.onkeydown=e=>{checkInInput=document.activeElement==inputSearch,"/"!==e.key||checkInInput||(e.stopPropagation(),e.preventDefault(),inputSearch.focus())},document.addEventListener("focusin",(e=>{divNavSearch.contains(e.target)||(divRes.style.display="none")})),inputSearch.onkeydown=e=>{if("Enter"===e.key){e.stopPropagation(),e.preventDefault();var t=ulRes.querySelector('li[class*="selected"]');window.location.href=t.getElementsByClassName("item__content")[0].firstChild.firstChild.href}"Escape"===e.key&&(divRes.style.display="none",inputSearch.blur())},divNavSearch.onkeydown=e=>{if(hasResult=ulRes.getElementsByTagName("li").length>=1,hasResult){["ArrowUp","ArrowDown"].indexOf(e.key)>-1&&e.preventDefault();var t=ulRes.firstChild,n=ulRes.lastChild,s=ulRes.querySelector('li[class*="selected"]');switch(e.key){case"ArrowUp":nextLi=s&&s!=t?s.previousSibling:n,addSelected(nextLi),s=nextLi,updateScroll(s,divRes);break;case"ArrowDown":nextLi=s&&s!=n?s.nextSibling:t,addSelected(nextLi),s=nextLi,updateScroll(s,divRes)}}};</script><div class=header-container><div class="header-logo post-layout"><img alt="MOOC: Angular 3 - Observable" src=/img/header/angular.svg class=keep-original height=55 width=55></div><h1>MOOC: Angular 3 - Observable</h1><div id=more-info><div id=note-tag><a href=/tags/mooc/ id=category }>MOOC</a> <a href=/tags/angular/ id=category }>Angular</a></div><div id=last-modified>Last modified 1 years ago / <a href=https://github.com/dinhanhthi/notes/edit/master/./posts/mooc/2021-03-04-angular-3-observable.md>Edit on Github</a></div></div></div></header><main class="" id=main-wrapper><article class=post-container><div class="container mt-2 normal page-note"><div class="danger not-full-warning"><div class=warning-icon><img alt=Warning src=/img_src/icons/time.svg class=keep-original></div><div>This post was <strong>updated more than 1 year ago</strong>, some information may be outdated!</div></div><div class="toc toc-common toc-js"><div class=ol-container><div class=toc-heading>In this note</div><ol><li><a href=#docs>Docs</a><li><a href="#what's-observable%3F">What's Observable?</a><li><a href=#create-observable>Create observable</a><ol><li><a href=#.subscribe()>.subscribe()</a><li><a href=#.create()>.create()</a><li><a href=#.error()>.error()</a><li><a href=#.complete()>.complete()</a></ol><li><a href=#operators>Operators</a><li><a href=#subjects>Subjects</a></ol></div></div><p>This is my note for the course "<a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/13914134#overview>Angular - The Complete Guide (2021 Edition)</a>" which is taught by Maximilian Schwarzmüller on Udemy. This is an incredible course for you to start to learn Angular from basic. The official Angular docs is good but it's not for the beginner.<p>🍄 <strong>PART 1</strong> — <a href=/angular-1-basics-components-databinding-directives/ >Angular 1 - Basics & Components & Databinding & Directives</a><br>🍄 <strong>PART 2</strong> — <a href=/angular-2-service-dependency-injection-routing/ >Angular 2 - Services & Dependency Injection & Routing</a><br>🍄 <strong>PART 3</strong> — <a href=/angular-3-observable/ >Angular 3 - Observable</a><br>🍄 <strong>PART 4</strong> — <a href=/angular-4-forms/ >Angular 4 - Forms</a><br>👉 <a href=https://github.com/dinhanhthi/learn-angular-complete-guide>Github repo</a><br>👉 <strong>Other note</strong> (taken before this course): <a href=https://www.notion.so/Angular-101-fcbd5683f8e941f89c709595792b62d2>Angular 101</a><br>👉 Other note: <a href=https://www.notion.so/RxJS-b4bc7e2d1f7d49b79d4cb701785e355f>RxJS</a>.<div class=warning><p>This note contains only the important things which can be look back later, it cannot replace either <a href=https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/13914134#overview>the course</a> nor <a href=https://angular.io/start>the official document</a>!</div><h2 id=docs tabindex=-1>Docs <a href=#docs class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><ul><li><a href=https://www.learnrxjs.io/ >Learn RxJS</a></ul><h2 id="what's-observable%3F" tabindex=-1>What's Observable? <a href="#what's-observable%3F" class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><p>👉 Codes: <a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/14-observable/obs-03-complete-custom-observable/src/app>finish custom observables</a>.<ul><li>An observable = a data source.<li>Observable patterns → <em>observable</em> —- stream —- <em>observer</em><li><em>Observer</em> (in previous codes, you subscribe something to the event from observable) → 3 type of data received (3 hooks): Handle data, Handle error, Handle completion.<li>Observables are contracts to which you subscribe to be informed about the changes in data.</ul><p><img alt=Angular_3_-_Observable_f0445b12735d4542956fd4f2eefca8e4/Untitled.png src=/img/post/angular/angular-3/Untitled.png><h2 id=create-observable tabindex=-1>Create observable <a href=#create-observable class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><p>There are several ways to create an observable from rxjs package.<pre class=language-jsx><code class=language-jsx><span class="token comment">// home.component.ts</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> interval<span class="token punctuation">,</span> Subscription <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span><span class="token punctuation">,</span> OnDestroy <span class="token punctuation">{</span><br>	<span class="token keyword">private</span> <span class="token literal-property property">firstObsSub</span><span class="token operator">:</span> Subscription<span class="token punctuation">;</span><br><br>	<span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>firstObsSub <span class="token operator">=</span> <span class="token function">interval</span><span class="token punctuation">(</span> <span class="token number">1000</span> <span class="token punctuation">)</span> <span class="token comment">// every seconds, a new event will be emitted</span><br>			<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span> <span class="token parameter">count</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// log to the console</span><br>			<span class="token punctuation">}</span><span class="token punctuation">)</span><br>	<span class="token punctuation">}</span><br><br>	<span class="token comment">// we have to .unsubscribe() -> if not, we get more and more observables</span><br>	<span class="token comment">//   whenever we get back to home</span><br>	<span class="token function">ngOnDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><br><span class="token comment">//|						// ^return nothing</span><br><span class="token comment">//^whenever we leave the component</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>firstObsSub<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prevent memory leak</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>All observables provided by Angular → no need to import from "rxjs" + no need to unsubscribe().<h3 id=.subscribe() tabindex=-1><code>.subscribe()</code> <a href=#.subscribe() class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><pre class=language-jsx><code class=language-jsx>customIntervalObs<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>function_for_next</span><span class="token punctuation">></span></span><span class="token plain-text">, // performed when get an emit<br>	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>function_for_error</span><span class="token punctuation">></span></span><span class="token plain-text">, // performed when there is error<br>	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>function_for_complete</span><span class="token punctuation">></span></span><span class="token plain-text"> // perform when finish getting emit<br>);</span></code></pre><p>You rarely build your own observable → use the ones given by angular or somewhere else. Below are just for more understanding how to do so if you want!<h3 id=.create() tabindex=-1><code>.create()</code> <a href=#.create() class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>Create manually <code>interval()</code>,<pre class=language-jsx><code class=language-jsx><span class="token keyword">import</span> <span class="token punctuation">{</span> Observable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token operator">...</span> <span class="token punctuation">{</span><br>	<span class="token keyword">private</span> <span class="token literal-property property">customObsSub</span><span class="token operator">:</span> Subscription<span class="token punctuation">;</span><br><br>	<span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token keyword">const</span> customIntervalObs <span class="token operator">=</span> Observable<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">observer</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>			<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>			<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>				observer<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span><br>						<span class="token comment">//  ^method to emit a new value, there are also: .error(), .complete()</span><br>				count<span class="token operator">++</span><span class="token punctuation">;</span><br>			<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>		customObsSub <span class="token operator">=</span> customIntervalObs<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><br>		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><br>	<span class="token function">ngOnDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>customObsSub<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h3 id=.error() tabindex=-1><code>.error()</code> <a href=#.error() class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>If we send HTTP request → we usually get .<pre class=language-jsx><code class=language-jsx><span class="token comment">// using the same structure of code as previous code box</span><br><span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>	observer<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">></span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		observer<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Count is greater than 3!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span> <span class="token comment">// stop subscription -> observer ends at "4"</span><br>	count<span class="token operator">++</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>customObsSub <span class="token operator">=</span> customIntervalObs<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// or you could send error to backend</span><br>	<span class="token function">alert</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Count is greater than 3!"</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id=.complete() tabindex=-1><code>.complete()</code> <a href=#.complete() class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h3><p>There are some observables can be completed → what we will do when it happens?<p>Cancled due to an error IS DIFFERENT than it completes! → complete function in <code>.subscribe()</code> is not executed when there is an error!<pre class=language-jsx><code class=language-jsx><span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>	observer<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		observer<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// complete observable before count=3</span><br>	<span class="token punctuation">}</span><br>	<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">></span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		observer<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Count is greater than 3!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br>	count<span class="token operator">++</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>customObsSub <span class="token operator">=</span> customIntervalObs<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// or you could send error to backend</span><br>	<span class="token function">alert</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Count is greater than 3!"</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Completed!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// you don't need to unsubscribe if your observable</span><br>														 <span class="token comment">//   did complete BUT there nothing wrong if you</span><br>														 <span class="token comment">//   keep using .unsubcribe()</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id=operators tabindex=-1>Operators <a href=#operators class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><p>👉 <a href=https://www.learnrxjs.io/learn-rxjs/operators/ >Operators - Learn RxJS</a><br>👉 <a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/blob/master/14-observable/obs-04-operators/src/app/home/home.component.ts>Codes for this section</a>.<pre class=language-jsx><code class=language-jsx><span class="token keyword">import</span> <span class="token punctuation">{</span> map <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs/operators'</span><span class="token punctuation">;</span></code></pre><p>Operators are the magic features of the RxJS library turn observables → awesome construct!<p><img alt=Angular_3_-_Observable_f0445b12735d4542956fd4f2eefca8e4/Untitled_1.png src=/img/post/angular/angular-3/Untitled_1.png><p>Example: we wanna add "Round" before the number emiited (Round 1, Round 2,....) → an old option is to add "Round" in the <code>.subscribe()</code> function. → We can do that before theh subscription using Operators! ← <code>.pipe()</code> comes in!<pre class=language-jsx><code class=language-jsx><span class="token keyword">this</span><span class="token punctuation">.</span>firstObsSubscription <span class="token operator">=</span> customIntervalObservable<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> data <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">data</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token string">'Round: '</span> <span class="token operator">+</span> <span class="token punctuation">(</span>data <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>We need a transformation of the received data before you subscribe → using operators.<p>With <code>.pipe()</code>, we can apply 1 or more operators inside it!<pre class=language-jsx><code class=language-jsx><span class="token comment">// import operators from rxjs/operators first!</span><br><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>operator</span><span class="token punctuation">></span></span><span class="token plain-text">, </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>operator</span><span class="token punctuation">></span></span><span class="token plain-text">, ...)</span></code></pre><h2 id=subjects tabindex=-1>Subjects <a href=#subjects class=direct-link aria-hidden=true><i class="fontello-icon icon-link"></i></a></h2><p>👉 <a href=https://github1s.com/dinhanhthi/learn-angular-complete-guide/blob/master/14-observable/obs-05-finished/src/app/user.service.ts>Codes for this section</a>.<p>Instead of using <code>EventEmitter</code> (from <code>@angular/core</code>), to emit and subscribe event between components, we can use a subject!<pre class=language-jsx><code class=language-jsx><span class="token comment">// user.service.ts</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> Subject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span><br><br>@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">providedIn</span><span class="token operator">:</span> <span class="token string">'root'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span><br>  activatedEmitter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>boolean</span><span class="token punctuation">></span></span><span class="token plain-text">();<br>}<br><br>// compare with using EventEmitter<br>@Injectable()<br>export ... </span><span class="token punctuation">{</span><br>	activatedEmitter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>boolean</span><span class="token punctuation">></span></span><span class="token plain-text">();<br>}</span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// user.component.ts</span><br><span class="token function">onActivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	<span class="token keyword">this</span><span class="token punctuation">.</span>userService<span class="token punctuation">.</span>activatedEmitter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// compare with EventEmitter</span><br><span class="token function">onActivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	<span class="token keyword">this</span><span class="token punctuation">.</span>userService<span class="token punctuation">.</span>activatedEmitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><pre class=language-jsx><code class=language-jsx><span class="token comment">// app.component.ts</span><br><span class="token comment">// we use the same for both EventEmitter and Subject</span><br><span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	<span class="token keyword">this</span><span class="token punctuation">.</span>userService<span class="token punctuation">.</span>activateEmitter<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>Unlike normal observable (you can created) → <code>.next()</code> is used INSIDE the observable (when you created it) ← subject is different: we can call <code>.next()</code> outside the observable!<p><img alt=Angular_3_-_Observable_f0445b12735d4542956fd4f2eefca8e4/Untitled_2.png src=/img/post/angular/angular-3/Untitled_2.png><p>There are also other subclasses for Subjects: <code>BehaviorSubject</code>, <code>ReplaySubject</code>,...<p><strong>GOOD PRACTICE</strong>:<ul><li>Don't use <code>EventEmitter</code>, use <code>Subject</code>!!!! ← don't forget to unsubcribe to Subect when you don't need them. ← by storing the subscription + then unsubscribe().<ul><li>Only use Subject to communicate across components through services/mechanisms where you in the end subscribe to somewhere!<ul><li>Not subscribe to an event which probably is an output if you do plan to subscribe manually!</ul></ul><li>ONLY USE <code>EventEmitter</code> on the <code>@Output</code> property!! ← EventEmitter gets cleaned auto (no need unsubscribe)</ul></div><script type=application/ld+json>{
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": "MOOC: Angular 3 - Observable",
        "image": [],
        "author": "Anh-Thi DINH",
        "url": "https://dinhanhthi.com/angular-3-observable/",
        "mainEntityOfPage": "https://dinhanhthi.com/angular-3-observable/",
        "datePublished": "04-03-2021",
        "dateModified": "2021-03-04",
        "description": "This is my note for the course &amp;quot;Angular - The Complete Guide (2021 Edition)&amp;quot; which is taught by Maximilian Schwarzmüller on Udemy...."
      }</script></article></main><footer><a href=/ target=_blank>Thi  ©  2022 </a> •  <a href=/about-the-notes/ >About this site </a> •  <a href=https://photos.app.goo.gl/9OVEkdTjmtRPg7vC3 target=_blank>My sketches </a> •  <a href=https://goo.gl/photos/yQXdQws1LLS16x5v5 target=_blank>I cook </a> •  <a href=/support-thi/ ><img alt="Support Thi" src=/img_src/icons/coffee.svg class=keep-original height=16 width=auto> Support Thi</a></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.6/elasticlunr.min.js></script><script src=/src/js/components/clipboard.min.js></script><script src="/src/js/main.min.js?hash=d3b51a19b7" async defer></script><a href=/support-thi/ class="floating-button tooltip" id=buy-me-a-coffee><img alt="Support Thi" src=/img_src/icons/coffee.svg class=keep-original> <span class=tooltiptext>Support Thi</span> </a><button class="floating-button tooltip" id=scroll-top-btn><img alt="Scroll to top" src=/img_src/to-top.webp class=keep-original> <span class=tooltiptext>Top</span></button>