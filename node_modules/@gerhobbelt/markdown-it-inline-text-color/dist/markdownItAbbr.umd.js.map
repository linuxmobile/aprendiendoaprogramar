{"version":3,"file":"markdownItAbbr.umd.js","sources":["../index.js"],"sourcesContent":["// Process ~subscript~\n\nlet COLOR_OPEN_REGEX = /{color:(#?\\w+)}/;\nlet COLOR_CLOSE_REGEX = /{color}/;\nlet TOKEN_TYPE = 'color_text';\nlet MARKUP = '{color}';\n\nfunction getColor(attrs) {\n  if (!attrs || attrs.length < 1) { return null; }\n\n  for (let ii = 0; ii < attrs.length; ii++) {\n    let att = attrs[ii];\n    if (att && att.length > 1) {\n      if (att[0] === 'color') {\n        return att[1];\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction color(state, silent) {\n  let found,\n      content,\n      token,\n      startResult,\n      endResult,\n      result,\n      nesting = 1,\n      isOpen = true,\n      max = state.posMax,\n      start = state.pos;\n\n  if (state.src.charCodeAt(start) !== 0x7B/* ~ */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n\n  content = state.src.slice(start);\n  startResult = COLOR_OPEN_REGEX.exec(content);\n  endResult = COLOR_CLOSE_REGEX.exec(content);\n  if (!startResult && !endResult) { return false; }\n\n  if (startResult && endResult) {\n    if (startResult.index < endResult.index) {\n      result = startResult;\n    } else {\n      nesting = -1;\n      result = endResult;\n    }\n  } else if (startResult) {\n    result = startResult;\n  } else {\n    result = endResult;\n    nesting = -1;\n  }\n\n  isOpen = result.length === 2;\n  state.posMax = start + result[0].length;\n\n  token         = state.push(TOKEN_TYPE, 'span', nesting);\n  token.markup  = MARKUP;\n\n  if (isOpen) {\n    token.attrPush([ 'color', result[1] ]);\n  }\n\n  state.pos = state.posMax;\n  state.posMax = max;\n  return true;\n}\n\nfunction renderDefault(tokens, idx, _options, env, self) {\n  let token = tokens[idx];\n\n  let result = [ '<' ];\n\n  if (token.nesting === -1) {\n    result.push('/');\n  }\n\n  result.push('span');\n\n  if (token.nesting === 1) {\n    let color = getColor(token.attrs);\n\n    if (color) {\n      result.push(' style=\"color:', color, ';\"');\n    }\n  }\n  result.push('>');\n\n  return result.join('');\n}\n\nmodule.exports = function sub_plugin(md, name, options) {\n  options = options || {};\n\n  md.inline.ruler.after('emphasis', 'span', color);\n\n  md.renderer.rules[TOKEN_TYPE] = options.render || renderDefault;\n};\n"],"names":["COLOR_OPEN_REGEX","COLOR_CLOSE_REGEX","TOKEN_TYPE","MARKUP","getColor","attrs","length","ii","att","color","state","silent","content","token","startResult","endResult","result","nesting","isOpen","max","posMax","start","pos","src","charCodeAt","slice","exec","index","push","markup","attrPush","renderDefault","tokens","idx","_options","env","self","join","module","exports","sub_plugin","md","name","options","inline","ruler","after","renderer","rules","render"],"mappings":"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"}